/** Jindo Mobile Component(minify:5) : ../../www/docs/jindo-mobile/archive/1.13.0/
 *	jindo.m
 *	jindo.m.Effect
 *	jindo.m.Component
 *	jindo.m.Morph
 *	jindo.m.UIComponent
 *	jindo.m.Animation
 *	jindo.m.Cube
 *	jindo.m.Slide
 *	jindo.m.LayerEffect
 *	jindo.m._Effect_
 *	jindo.m.FadeEffect
 *	jindo.m.SlideEffect
 *	jindo.m.Touch
 *	jindo.m.SwipeCommon
 *	jindo.m.Flick
 *	jindo.m.CubeFlicking
 *	jindo.m.PreviewFlicking
 *	jindo.m.SlideFlicking
 *	jindo.m.Flicking
 *	jindo.m._FlickingAnimation_
 *	jindo.m.AjaxHistory
 *	jindo.m.LayerPosition
 *	jindo.m.ScrollEnd
 *	jindo.m.FloatingLayer
 */
if("undefined"==typeof jindo.m&&"undefined"!=typeof Node){var ___Old__addEventListener___=Node.prototype.addEventListener;Node.prototype.addEventListener=function(t,e,n){var i=arguments.callee;return i&&"click"===t&&"A"===this.tagName&&(this.___listeners___||(this.___listeners___=[])).push({listener:e,useCapture:n}),___Old__addEventListener___.apply(this,arguments)};var ___Old__removeEventListener___=Node.prototype.removeEventListener;Node.prototype.removeEventListener=function(t){var e=arguments.callee;return e&&"click"===t&&"A"===this.tagName&&this.___listeners___&&this.___listeners___.pop(),___Old__removeEventListener___.apply(this,arguments)}}var raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,caf=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;if(raf&&!caf){var keyInfo={},oldraf=raf;raf=function(t){function e(){keyInfo[n]&&t()}var n=oldraf(e);return keyInfo[n]=!0,n},caf=function(t){delete keyInfo[t]}}else raf&&caf||(raf=function(t){return window.setTimeout(t,16)},caf=window.clearTimeout);window.requestAnimationFrame=raf,window.cancelAnimationFrame=caf,jindo.m=function(){function _initTouchEventName(){"ontouchstart"in window?(_htTouchEventName.start="touchstart",_htTouchEventName.move="touchmove",_htTouchEventName.end="touchend",_htTouchEventName.cancel="touchcancel"):window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0&&(_htTouchEventName.start="MSPointerDown",_htTouchEventName.move="MSPointerMove",_htTouchEventName.end="MSPointerUp",_htTouchEventName.cancel="MSPointerCancel")}function _getOrientationChangeEvt(){var t="onorientationchange"in window?"orientationchange":"resize";return _htOsInfo.android&&"2.1"===_htOsInfo.version&&(t="resize"),t}function _getVertical(){var t=null,e=_getOrientationChangeEvt();if("resize"===e){var n=document.documentElement.clientWidth;t=_nPreWidth>n?!0:n==_nPreWidth?!jindo.$Agent().navigator().mobile||jindo.$Agent().os().ipad?n<document.documentElement.clientHeight:_isVertical:!1,_nPreWidth=n}else{var i=window.orientation;0===i||180==i?t=!0:(90==i||-90==i)&&(t=!1)}return t}function _attachEvent(){jindo.$Fn(_onOrientationChange,this).attach(window,_getOrientationChangeEvt()).attach(window,"load"),jindo.$Fn(_onPageshow,this).attach(window,"pageshow")}function _initDeviceInfo(){function t(t,e){return(e||"").indexOf(t)>-1}_setOsInfo(),_setBrowserInfo();var e=navigator.userAgent;_htDeviceInfo={iphone:_htOsInfo.iphone,ipad:_htOsInfo.ipad,android:_htOsInfo.android,win:t("Windows Phone",e),galaxyTab:/SHW-M180/.test(e),galaxyTab2:/SHW-M380/.test(e),galaxyS:/SHW-M110/.test(e),galaxyS2:/SHW-M250|GT-I9100/.test(e),galaxyS2LTE:/SHV-E110/.test(e),galaxyS3:/SHV-E210|SHW-M440|GT-I9300/.test(e),galaxyNote:/SHV-E160/.test(e),galaxyNote2:/SHV-E250/.test(e),galaxyNexus:/Galaxy Nexus/.test(e),optimusLte2:/LG-F160/.test(e),optimusVu:/LG-F100/.test(e),optimusLte:/LG-LU6200|LG-SU640|LG-F120K'/.test(e),galaxyS4:/SHV-E300|GT-I9500|GT-I9505|SGH-M919|SPH-L720|SGH-I337|SCH-I545/.test(e),bChrome:_htBrowserInfo.chrome,bSBrowser:_htBrowserInfo.bSBrowser,bInapp:!1,version:_htOsInfo.version,browserVersion:_htBrowserInfo.version};for(var n in _htDeviceInfo)"boolean"==typeof _htDeviceInfo[n]&&_htDeviceInfo[n]&&_htDeviceInfo.hasOwnProperty(n)&&"b"!==n[0]&&(_htDeviceInfo.name=n);_htDeviceInfo.samsung=/GT-|SCH-|SHV-|SHW-|SPH|SWT-|SGH-|EK-|Galaxy Nexus|SAMSUNG/.test(e),_htDeviceInfo.lg=/LG-/.test(e),_htDeviceInfo.pantech=/IM-/.test(e),_htDeviceInfo.iphone||_htDeviceInfo.ipad?t("Safari",e)||(_htDeviceInfo.bInapp=!0):_htDeviceInfo.android&&(e=e.toLowerCase(),(t("inapp",e)||t("app",e.replace("applewebkit","")))&&(_htDeviceInfo.bInapp=!0))}function _setOsInfo(){_htOsInfo=jindo.$Agent().os(),_isInapp(),_htOsInfo.version=_htOsInfo.version||_getOsVersion(),_htOsInfo.ios="undefined"==typeof _htOsInfo.ios?_htOsInfo.ipad||_htOsInfo.iphone:_htOsInfo.ios}function _setBrowserInfo(){_htBrowserInfo=jindo.$Agent().navigator(),_htOsInfo.ios&&/CriOS/.test(navigator.userAgent)&&(_htBrowserInfo.chrome=!0),"undefined"==typeof _htBrowserInfo.firefox&&(_htBrowserInfo.firefox=/Firefox/.test(navigator.userAgent)),_isSBrowser(),_updateUnderVersion()}function _updateUnderVersion(){_htBrowserInfo.msafari&&_htBrowserInfo.chrome?_htBrowserInfo.version=parseFloat(_htOsInfo.ios?navigator.userAgent.match(/CriOS[ \/]([0-9.]+)/)[1]:navigator.userAgent.match(/Chrome[ \/]([0-9.]+)/)[1]):_htBrowserInfo.firefox&&(_htBrowserInfo.version=parseFloat(navigator.userAgent.match(/Firefox[ \/]([0-9.]+)/)[1]))}function _isInapp(){var t=navigator.userAgent;_htOsInfo.bInapp=!1,_htOsInfo.ios?-1==t.indexOf("Safari")&&(_htOsInfo.bInapp=!0):_htOsInfo.android&&(t=t.toLowerCase(),(-1!=t.indexOf("inapp")||-1!=t.replace("applewebkit","").indexOf("app"))&&(_htOsInfo.bInapp=!0))}function _isSBrowser(){_htBrowserInfo.bSBrowser=!1;var t=navigator.userAgent,e=t.match(/(SAMSUNG|Chrome)/gi)||"";e.length>1&&(_htBrowserInfo.bSBrowser=!0)}function _getOsVersion(){if(!_htOsInfo.version){var t,e=navigator.userAgent,n="";return _htOsInfo.iphone||_htOsInfo.ipad?(t=e.match(/OS\s([\d|\_]+\s)/i),null!==t&&t.length>1&&(n=t[1])):_htOsInfo.android?(t=e.match(/Android\s([^\;]*)/i),null!==t&&t.length>1&&(n=t[1])):_htOsInfo.mwin&&(t=e.match(/Windows Phone\s([^\;]*)/i),null!==t&&t.length>1&&(n=t[1])),n.replace(/\_/g,".").replace(/\s/g,"")}}function _onOrientationChange(t){if("load"===t.type)return _nPreWidth=document.documentElement.clientWidth,void(_isVertical=_htOsInfo.bInapp||!_htOsInfo.iphone&&!_htOsInfo.ipad&&"resize"===_getOrientationChangeEvt()?_nPreWidth>document.documentElement.clientHeight?!1:!0:_getVertical());if("resize"===_getOrientationChangeEvt())setTimeout(function(){_orientationChange(t)},0);else{var e=jindo.$Document().clientSize().width,n=300;if(_htDeviceInfo.android){if("orientationchange"==t.type&&e==_nPreWidth)return setTimeout(function(){_onOrientationChange(t)},500),!1;_nPreWidth=e}clearTimeout(_nRotateTimer),_nRotateTimer=setTimeout(function(){_orientationChange(t)},n)}}function _orientationChange(t){var e=_isVertical;_isVertical=_getVertical(),(jindo.$Agent().navigator().mobile||jindo.$Agent().os().ipad)&&e!==_isVertical&&(t.sType="rotate",t.isVertical=_isVertical,_fireEvent("mobilerotate",t))}function _onPageshow(t){_isVertical=_getVertical(),t.sType="pageShow",setTimeout(function(){_fireEvent("mobilePageshow",t)},300)}function _getTranslateOffsetFromCSSMatrix(t){var e=new WebKitCSSMatrix(window.getComputedStyle(t).webkitTransform);return{top:e.m42,left:e.m41}}function _fireEvent(t,e){if(_htHandler[t])for(var n=_htHandler[t].concat(),i=0,o=n.length;o>i;i++)n[i].call(this,e)}function _getTranslateOffsetFromStyle(t){var e=0,n=0,i=null,o=t.style[""==jindo.m.getCssPrefix()?"transform":jindo.m.getCssPrefix()+"Tranform"];if(o&&o.length>0&&(i=o.match(/translate.{0,2}\((.*)\)/),i&&i.length>1)){var s=i[1].split(",");s&&s.length>1&&(e=parseInt(s[1],10),n=parseInt(s[0],10))}return{top:e,left:n}}var _isVertical=null,_nPreWidth=-1,_nRotateTimer=null,_htHandler={},_htDeviceInfo={},_htAddPatch={},_htOsInfo={},_htBrowserInfo={},_htTouchEventName={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null},_htDeviceList={galaxyTab:["SHW-M180"],galaxyTab2:["SHW-M380"],galaxyS:["SHW-M110"],galaxyS2:["SHW-M250","GT-I9100"],galaxyS2LTE:["SHV-E110"],galaxyS3:["SHV-E210","SHW-M440","GT-I9300"],galaxyNote:["SHV-E160"],galaxyNote2:["SHV-E250"],galaxyNexus:["Galaxy Nexus"],optimusLte2:["LG-F160"],optimusVu:["LG-F100"],optimusLte:["LG-LU6200","LG-SU640","LG-F120K"]},_htClientSize={galaxyTab:{4:{portrait:400},"default":{portrait:300,landscape:100}},galaxyTab2:{"default":{portrait:500,landscape:100}},galaxyNexus:{"default":{portrait:800,address:30,landscape:100}}},__M__={MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"},sVersion:"unknown",$init:function(){_initDeviceInfo(),_initTouchEventName(),_attachEvent()},bindRotate:function(t){var e=_htHandler.mobilerotate;"undefined"==typeof e&&(e=_htHandler.mobilerotate=[]),e.push(t)},unbindRotate:function(t){var e=_htHandler.mobilerotate;if(e)for(var n,i=0;n=e[i];i++)if(n===t){e.splice(i,1);break}},bindPageshow:function(t){var e=_htHandler.mobilePageshow;"undefined"==typeof e&&(e=_htHandler.mobilePageshow=[]),e.push(t)},unbindPageshow:function(t){var e=_htHandler.mobilePageshow;if(e)for(var n,i=0;n=e[i];i++)if(n===t){e.splice(i,1);break}},getDeviceInfo:function(){return _htDeviceInfo},getOsInfo:function(){return _htOsInfo},getBrowserInfo:function(){return _htBrowserInfo},isVertical:function(){return null===_isVertical?_getVertical():_isVertical},getNodeElement:function(t){for(;1!=t.nodeType;)t=t.parentNode;return t},getTranslateOffset:function(t){t=jindo.$Element(t);var e,n=t.$value();return e=_htOsInfo.android&&3===parseInt(_htOsInfo.version,10)?_getTranslateOffsetFromStyle(n):"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix?_getTranslateOffsetFromCSSMatrix(n):_getTranslateOffsetFromStyle(n)},getStyleOffset:function(t){var e=parseInt(t.css("left"),10),n=parseInt(t.css("top"),10);return e=isNaN(e)?0:e,n=isNaN(n)?0:n,{left:e,top:n}},attachTransitionEnd:function(t,e){var n=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");if(n>230)t._jindo_fn_=jindo.$Fn(e,this).attach(t,"transitionend");else{var i=("ms"===this.getCssPrefix()?"MS":this.getCssPrefix())+"TransitionEnd";t.addEventListener(i,e,!1)}},detachTransitionEnd:function(t,e){var n=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");if(n>230)t._jindo_fn_&&(t._jindo_fn_.detach(t,"transitionend"),delete t._jindo_fn_);else{var i=("ms"===this.getCssPrefix()?"MS":this.getCssPrefix())+"TransitionEnd";t.removeEventListener(i,e,!1)}},_attachFakeJindo:function(t,e,n){var i=+jindo.$Jindo().version.replace(/[a-z.]/gi,""),o=null;return o=230>i&&"undefined"!=typeof _notSupport?_notSupport.$Fn(e).attach(t,n):jindo.$Fn(e).attach(t,n)},_getTouchEventName:function(){return _htTouchEventName},getCssPrefix:function(){var t="";return"undefined"!=typeof document.body.style.webkitTransition?t="webkit":"undefined"!=typeof document.body.style.transition||("undefined"!=typeof document.body.style.MozTransition?t="Moz":"undefined"!=typeof document.body.style.OTransition?t="O":"undefined"!=typeof document.body.style.msTransition&&(t="ms")),t},getClosest:function(t,e){var n,i=jindo.$Element(e),o=/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/gi;return o.test(t)?"<"+e.tagName.toUpperCase()+">"==t.toUpperCase()?n=e:(n=i.parent(function(e){return"<"+e.$value().tagName.toUpperCase()+">"==t.toUpperCase()?e:void 0}),n=n.length?n[0].$value():!1):(0==t.indexOf(".")&&(t=t.substring(1,t.length)),i.hasClass(t)?n=e:(n=i.parent(function(e){return e.hasClass(t)?e:void 0}),n=n.length?n[0].$value():!1)),n},useCss3d:function(t){if(_htAddPatch.useCss3d&&"function"==typeof _htAddPatch.useCss3d)switch(_htAddPatch.useCss3d()){case-1:return!1;case 1:return!0}"undefined"==typeof t&&(t=!1);var e=!1;if(_htBrowserInfo.chrome&&_htBrowserInfo.version<"25"&&!_htBrowserInfo.bSBrowser)return e;if(_htOsInfo.ios)e=!0;else if(_htBrowserInfo.firefox)e=!0;else if(_htOsInfo.android){var n=navigator.userAgent.match(/\(.*\)/)[0];_htOsInfo.version>="4.1.0"?e=/EK-GN120|SM-G386F/.test(n)?!1:!0:(!t&&_htOsInfo.version>="4.0"&&(e=!0),_htOsInfo.version>="4.0.3"&&/SHW-|SHV-|GT-|SCH-|SGH-|SPH-|LG-F160|LG-F100|LG-F180|LG-F200|EK-|IM-A|LG-F240|LG-F260/.test(n)&&!/SHW-M420|SHW-M200|GT-S7562/.test(n)&&(e=!0))}return e},patch:function(t){return _htAddPatch.ver=t,this},_checkPatchVersion:function(){var t=jindo.m.Component.VERSION.split("."),e=t.slice(0,3).join(".");return _htAddPatch.ver>=e?!0:!1},add:function(t){if(this._checkPatchVersion())for(var e in t)_htAddPatch[e]=t[e];return this},getDeviceName:function(){if(_htAddPatch.getDeviceName&&"function"==typeof _htAddPatch.getDeviceName&&_htAddPatch.getDeviceName())return _htAddPatch.getDeviceName();var sUserAgent=navigator.userAgent;for(var i in _htDeviceList)if(eval("/"+_htDeviceList[i].join("|")+"/").test(sUserAgent))return i;var htInfo=jindo.$Agent().os();for(var x in htInfo)if(htInfo[x]===!0&&htInfo.hasOwnProperty(x))return x},useFixed:function(){if(_htAddPatch.useFixed&&"function"==typeof _htAddPatch.useFixed)switch(_htAddPatch.useFixed()){case-1:return!1;case 1:return!0}var t=!1;return(_htBrowserInfo.chrome||_htBrowserInfo.firefox||_htOsInfo.android&&parseInt(_htOsInfo.version,10)>=3||_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=5||_htOsInfo.mwin&&parseInt(_htOsInfo.version,10)>=8)&&(t=!0),t},useTimingFunction:function(t){if(_htAddPatch.useTimingFunction&&"function"==typeof _htAddPatch.useTimingFunction&&_htAddPatch.useTimingFunction())switch(_htAddPatch.useTimingFunction()){case-1:return!1;case 1:return!0}"undefined"==typeof t&&(t=!1);var e=this.useCss3d();return _htOsInfo.android?(e=!1,!t&&_htOsInfo.version>="4.0"&&(e=!0)):_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=6&&(e=t?!0:!1),e},_cacheMaxClientSize:{},_fullSizeCheckElement:null,_allEventStop:function(t,e){this._htEvent||(this._htEvent={}),"detach"==e?(this._htEvent.touchstart.detach(document.body,"touchstart").detach(document.body,"touchmove"),this._htEvent={}):this._htEvent.touchstart||"attach"!=e||(this._htEvent.touchstart=jindo.$Fn(t,this).attach(document.body,"touchstart").attach(document.body,"touchmove"))},_stopDefault:function(t){t.stop()},_hasOrientation:void 0!==window.orientation,_maxClientSize:function(t,e){var n=this.getOsInfo();this._allEventStop(this._stopDefault,"attach"),this._fullSizeCheckElement||(this._fullSizeCheckElement=document.createElement("div"));var i=n.android?500:100;i=e?1:i;var o;this._hasOrientation&&(o=Math.abs(window.orientation/90)%2,i=void 0!==this._cacheMaxClientSize[o]?0:i);var s=this;document.body.scrollTop<=1?(document.body.appendChild(s._fullSizeCheckElement),s._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+parseInt(window.innerHeight+200,10)+"px;",window.scrollTo(0,1),setTimeout(function(){s._checkSize(s._hasOrientation,s._cacheMaxClientSize,o,t,s,i)},i)):(this._fullSizeCheckElement.style.height=window.innerHeight+"px",this._checkSize(this._hasOrientation,this._cacheMaxClientSize,o,t,s,i))},_checkSize:function(t,e,n,i,o,s){var h=this.getOsInfo(),a=this.getBrowserInfo();this._allEventStop(this._stopDefault,"attach");var r;t&&e[n]?r=e[n]:(o._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+window.innerHeight+"px;overflow:hidden",r=a.mobile||h.ipad?{width:window.innerWidth,height:window.innerHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},t&&(e[n]=r)),i.call(o,r);var l=this;this._allEventStop(this._stopDefault,"detach"),0===s?this._fullSizeCheckElement.style.height="0px":setTimeout(function(){l._fullSizeCheckElement.style.height="0px"},s)},hasOffsetBug:function(){if(_htAddPatch.hasOffsetBug&&"function"==typeof _htAddPatch.hasOffsetBug)switch(_htAddPatch.hasOffsetBug()){case-1:return!1;case 1:return!0}var t=!1;return t=_htOsInfo.android?_htBrowserInfo.chrome||_htBrowserInfo.firefox?!1:_htOsInfo.version<"4"?!0:!1:!1},hasClickBug:function(){if(_htAddPatch.hasClickBug&&"function"==typeof _htAddPatch.hasClickBug)switch(_htAddPatch.hasClickBug()){case-1:return!1;case 1:return!0}return _htOsInfo.ios||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||!1}};return __M__._isUseFixed=__M__.useFixed,__M__._isUseTimingFunction=__M__.useTimingFunction,__M__._isUseCss3d=__M__.useCss3d,__M__.getCssOffset=__M__.getTranslateOffset,__M__.$init(),__M__}(),"mixin"in jindo.$Jindo||(jindo.$Jindo.mixin=function(t,e){var n={};for(var i in t)n[i]=t[i];for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}),jindo.m.Effect=function(t){if(this instanceof arguments.callee)throw new Error("You can't create a instance of this");var e=/^(\-?[0-9\.]+)(%|\w+)?$/,n=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,i=/^rgba\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+),\s?([0-9\.]+)\)$/i,o=/^hsl\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%\)$/i,s=/^hsla\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%,\s?([0-9\.]+)\)$/i,h=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,a=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,r=function(t){var r,l=t;if(e.test(t))l=parseFloat(t),r=RegExp.$2||"";else if(n.test(t))l=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),1],r="color";else if(i.test(t))l=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),parseFloat(RegExp.$4,10)],r="color";else if(o.test(t))l=_(parseFloat(RegExp.$1,10),parseFloat(RegExp.$2,10)/100,parseFloat(RegExp.$3,10)/100,1),l.push(1),r="color";else if(s.test(t))l=_(parseFloat(RegExp.$1,10),parseFloat(RegExp.$2,10)/100,parseFloat(RegExp.$3,10)/100,1),l.push(parseFloat(RegExp.$4,10)),r="color";else{if(!h.test(t=t.replace(a,"#$1$1$2$2$3$3")))throw new Error("unit error ("+t+")");l=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),1],r="color"}return{nValue:l,sUnit:r}},l=function(t){var e=[];return t.replace(/([^\s]+\([^\)]*\)|[^\s]+)\s?/g,function(t,n){e.push(n)}),e},c=function(t){for(var e=l(t?t+"":"0"),n=[],i=0,o=e.length;o>i;i++)n.push(r(e[i]));return n},f=function(t){return"object"==typeof t?{nValue:t.nValue,sUnit:t.sUnit}:t},_=function(t,e,n){var i,o,s,h=(1-Math.abs(2*n-1))*e,a=t/60,r=h*(1-Math.abs(a%2-1));void 0===t||isNaN(t)||null===t?i=o=s=0:a>=0&&1>a?(i=h,o=r,s=0):a>=1&&2>a?(i=r,o=h,s=0):a>=2&&3>a?(i=0,o=h,s=r):a>=3&&4>a?(i=0,o=r,s=h):a>=4&&5>a?(i=r,o=0,s=h):a>=5&&6>a&&(i=h,o=0,s=r);var l=n-h/2;return[Math.round(255*(i+l)),Math.round(255*(o+l)),Math.round(255*(s+l))]};return function(e,n){var i,o,s=function(){var t=!1;if(h.start!==e&&(i=c(h.start),e=h.start,t=!0),h.end!==n&&(o=c(h.end),n=h.end,t=!0),t){var s,a,r=Math.max(i.length,o.length);if(i.length!==o.length&&r>1){switch(i.length){case 1:i[1]=f(i[2]=f(i[3]=f(i[0])));break;case 2:i[2]=f(i[0]),i[3]=f(i[1]);break;case 3:i[3]=f(i[1])}switch(o.length){case 1:o[1]=o[2]=o[3]=o[0];break;case 2:o[2]=o[0],o[3]=o[1];break;case 3:o[3]=o[1]}}for(var l=0;r>l;l++)if(s=i[l],a=o[l],0===s.nValue?s.sUnit=a.sUnit:0===a.nValue&&(a.sUnit=s.sUnit),s.sUnit!=a.sUnit)throw new Error("unit error ("+e+", "+n+")")}},h=function(e){var n=[];s();for(var h,a,r,l,c,f=0,_=Math.max(i.length,o.length);_>f;f++){h=i[f],a=o[f],r=h.nValue,l=a.nValue,c=h.sUnit;var u=t(e),d=function(t,e,n){return(e-t)*u+t+(n||0)};if("color"!=c)n.push(d(r,l,c));else{var m=d(r[3],l[3],0);if(1===m){var p=Math.max(0,Math.min(255,Math.round(d(r[0],l[0],0))))<<16;p|=Math.max(0,Math.min(255,Math.round(d(r[1],l[1],0))))<<8,p|=Math.max(0,Math.min(255,Math.round(d(r[2],l[2],0)))),p=p.toString(16).toUpperCase();for(var v=0;6-p.length;v++)p="0"+p;n.push("#"+p)}else n.push("rgba("+[Math.round(d(r[0],l[0],0)),Math.round(d(r[1],l[1],0)),Math.round(d(r[2],l[2],0)),d(r[3],l[3],0)].join(",")+")")}}return n.join(" ")};switch(arguments.length){case 0:break;case 1:n=e||"0",e="0",h.setStart=function(t){this.start=t}}return h.start=e,h.end=n,h.effectConstructor=arguments.callee,e=n=null,arguments.length>1&&s(),h}},jindo.m.Effect.linear=jindo.m.Effect(function(t){return t}),jindo.m.Effect.easeInSine=jindo.m.Effect(function(t){return 1==t?1:-Math.cos(t*(Math.PI/2))+1}),jindo.m.Effect.easeOutSine=jindo.m.Effect(function(t){return Math.sin(t*(Math.PI/2))}),jindo.m.Effect.easeInOutSine=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInSine(0,1)(2*t):.5*jindo.m.Effect.easeOutSine(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInSine=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutSine(0,1)(2*t):.5*jindo.m.Effect.easeInSine(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInQuad=jindo.m.Effect(function(t){return t*t}),jindo.m.Effect.easeOutQuad=jindo.m.Effect(function(t){return-(t*(t-2))}),jindo.m.Effect.easeInOutQuad=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInQuad(0,1)(2*t):.5*jindo.m.Effect.easeOutQuad(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInQuad=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutQuad(0,1)(2*t):.5*jindo.m.Effect.easeInQuad(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInCubic=jindo.m.Effect(function(t){return Math.pow(t,3)}),jindo.m.Effect.easeOutCubic=jindo.m.Effect(function(t){return Math.pow(t-1,3)+1}),jindo.m.Effect.easeInOutCubic=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeIn(0,1)(2*t):.5*jindo.m.Effect.easeOut(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInCubic=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOut(0,1)(2*t):.5*jindo.m.Effect.easeIn(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInQuart=jindo.m.Effect(function(t){return Math.pow(t,4)}),jindo.m.Effect.easeOutQuart=jindo.m.Effect(function(t){return-(Math.pow(t-1,4)-1)}),jindo.m.Effect.easeInOutQuart=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInQuart(0,1)(2*t):.5*jindo.m.Effect.easeOutQuart(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInQuart=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutQuart(0,1)(2*t):.5*jindo.m.Effect.easeInQuart(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInQuint=jindo.m.Effect(function(t){return Math.pow(t,5)}),jindo.m.Effect.easeOutQuint=jindo.m.Effect(function(t){return Math.pow(t-1,5)+1}),jindo.m.Effect.easeInOutQuint=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInQuint(0,1)(2*t):.5*jindo.m.Effect.easeOutQuint(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInQuint=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutQuint(0,1)(2*t):.5*jindo.m.Effect.easeInQuint(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInCircle=jindo.m.Effect(function(t){return-(Math.sqrt(1-t*t)-1)}),jindo.m.Effect.easeOutCircle=jindo.m.Effect(function(t){return Math.sqrt(1-(t-1)*(t-1))}),jindo.m.Effect.easeInOutCircle=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInCircle(0,1)(2*t):.5*jindo.m.Effect.easeOutCircle(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInCircle=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutCircle(0,1)(2*t):.5*jindo.m.Effect.easeInCircle(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInBack=jindo.m.Effect(function(t){var e=1.70158;return 1==t?1:t/1*(t/1)*((1+e)*t-e)}),jindo.m.Effect.easeOutBack=jindo.m.Effect(function(t){var e=1.70158;return 0===t?0:(t=t/1-1)*t*((e+1)*t+e)+1}),jindo.m.Effect.easeInOutBack=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInBack(0,1)(2*t):.5*jindo.m.Effect.easeOutBack(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInElastic=jindo.m.Effect(function(t){var e,n=0,i=0;return 0===t?0:1==(t/=1)?1:(n||(n=.3),!i||1>i?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-1)*Math.PI/n)))}),jindo.m.Effect.easeOutElastic=jindo.m.Effect(function(t){var e,n=0,i=0;return 0===t?0:1==(t/=1)?1:(n||(n=.3),!i||1>i?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/n)+1)}),jindo.m.Effect.easeInOutElastic=jindo.m.Effect(function(t){var e,n=0,i=0;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5),!i||1>i?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)*.5+1)}),jindo.m.Effect.easeOutBounce=jindo.m.Effect(function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),jindo.m.Effect.easeInBounce=jindo.m.Effect(function(t){return 1-jindo.m.Effect.easeOutBounce(0,1)(1-t)}),jindo.m.Effect.easeInOutBounce=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInBounce(0,1)(2*t):.5*jindo.m.Effect.easeOutBounce(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInExpo=jindo.m.Effect(function(t){return 0===t?0:Math.pow(2,10*(t-1))}),jindo.m.Effect.easeOutExpo=jindo.m.Effect(function(t){return 1==t?1:-Math.pow(2,-10*t/1)+1}),jindo.m.Effect.easeInOutExpo=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInExpo(0,1)(2*t):.5*jindo.m.Effect.easeOutExpo(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInExpo=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutExpo(0,1)(2*t):.5*jindo.m.Effect.easeInExpo(0,1)(2*t-1)+.5}),jindo.m.Effect._cubicBezier=function(t,e,n,i){return function(o){function s(t){return((f*t+c)*t+l)*t}function h(t){return((d*t+u)*t+_)*t}function a(t){return(3*f*t+2*c)*t+l}function r(t,e){var n,i,o,h,r,l;for(o=t,l=0;8>l;l++){if(h=s(o)-t,Math.abs(h)<e)return o;if(r=a(o),Math.abs(r)<1e-6)break;o-=h/r}if(n=0,i=1,o=t,n>o)return n;if(o>i)return i;for(;i>n;){if(h=s(o),Math.abs(h-t)<e)return o;t>h?n=o:i=o,o=.5*(i-n)+n}return o}var l=3*t,c=3*(n-t)-l,f=1-l-c,_=3*e,u=3*(i-e)-_,d=1-_-u;return h(r(o,.005))}},jindo.m.Effect.cubicBezier=function(t,e,n,i){var o=jindo.m.Effect(jindo.m.Effect._cubicBezier(t,e,n,i));return o.cubicBezier=[t,e,n,i],o},jindo.m.Effect.cubicEase=jindo.m.Effect.cubicBezier(.25,.1,.25,1),jindo.m.Effect.cubicEaseIn=jindo.m.Effect.cubicBezier(.42,0,1,1),jindo.m.Effect.cubicEaseOut=jindo.m.Effect.cubicBezier(0,0,.58,1),jindo.m.Effect.cubicEaseInOut=jindo.m.Effect.cubicBezier(.42,0,.58,1),jindo.m.Effect.cubicEaseOutIn=jindo.m.Effect.cubicBezier(0,.42,1,.58),jindo.m.Effect.overphase=jindo.m.Effect(function(t){return t/=.652785,(Math.sqrt((2-t)*t)+.1*t).toFixed(5)}),jindo.m.Effect.sinusoidal=jindo.m.Effect(function(t){return-Math.cos(t*Math.PI)/2+.5}),jindo.m.Effect.mirror=jindo.m.Effect(function(t){return jindo.m.Effect.sinusoidal(0,1)(.5>t?2*t:1-2*(t-.5))}),jindo.m.Effect.pulse=function(t){return jindo.m.Effect(function(e){return-Math.cos(e*(t-.5)*2*Math.PI)/2+.5})},jindo.m.Effect.wave=function(t,e){return jindo.m.Effect(function(n){return(e||1)*Math.sin(360*t*n*Math.PI/180).toFixed(5)})},jindo.m.Effect.stepStart=jindo.m.Effect(function(t){return 0===t?0:1}),jindo.m.Effect.stepEnd=jindo.m.Effect(function(t){return 1===t?1:0}),jindo.m.Effect.easeIn=jindo.m.Effect.easeInCubic,jindo.m.Effect.easeOut=jindo.m.Effect.easeOutCubic,jindo.m.Effect.easeInOut=jindo.m.Effect.easeInOutCubic,jindo.m.Effect.easeOutIn=jindo.m.Effect.easeOutInCubic,jindo.m.Effect.bounce=jindo.m.Effect.easeOutBounce,jindo.m.Effect.elastic=jindo.m.Effect.easeInElastic,jindo.m.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){this._htEventHandler={},this._htOption={},this._htOption._htSetter={}},option:function(t,e){switch(typeof t){case"undefined":var n={};for(var i in this._htOption)"htCustomEventHandler"!=i&&"_htSetter"!=i&&(n[i]=this._htOption[i]);return n;case"string":if("undefined"==typeof e)return this._htOption[t];if("htCustomEventHandler"==t){if("undefined"!=typeof this._htOption[t])return this;this.attach(e)}this._htOption[t]=e,"function"==typeof this._htOption._htSetter[t]&&this._htOption._htSetter[t](e);break;case"object":for(var o in t){if("htCustomEventHandler"==o){if("undefined"!=typeof this._htOption[o])continue;this.attach(t[o])}"_htSetter"!==o&&(this._htOption[o]=t[o]),"function"==typeof this._htOption._htSetter[o]&&this._htOption._htSetter[o](t[o])}}return this},optionSetter:function(t,e){switch(typeof t){case"undefined":return this._htOption._htSetter;case"string":if("undefined"==typeof e)return this._htOption._htSetter[t];this._htOption._htSetter[t]=jindo.$Fn(e,this).bind();break;case"object":for(var n in t)this._htOption._htSetter[n]=jindo.$Fn(t[n],this).bind()}return this},fireEvent:function(t,e){e=e||{};var n=this["on"+t],i=this._htEventHandler[t]||[],o="function"==typeof n,s=i.length>0;if(!o&&!s)return!0;i=i.concat(),e.sType=t,"undefined"==typeof e._aExtend&&(e._aExtend=[],e.stop=function(){e._aExtend.length>0&&(e._aExtend[e._aExtend.length-1].bCanceled=!0)}),e._aExtend.push({sType:t,bCanceled:!1});var h,a,r=[e];for(h=2,a=arguments.length;a>h;h++)r.push(arguments[h]);if(o&&n.apply(this,r),s){var l;for(h=0,l;l=i[h];h++)l.apply(this,r)}return!e._aExtend.pop().bCanceled},attach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(t,e){this.attach(e,t)},this).bind()),this;var n=this._htEventHandler[t];return"undefined"==typeof n&&(n=this._htEventHandler[t]=[]),n.push(e),this},detach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(t,e){this.detach(e,t)},this).bind()),this;var n=this._htEventHandler[t];if(n)for(var i,o=0;i=n[o];o++)if(i===e){n=n.splice(o,1);break}return this},detachAll:function(t){var e=this._htEventHandler;if(arguments.length)return"undefined"==typeof e[t]?this:(delete e[t],this);for(var n in e)delete e[n];return this}}),jindo.m.Component.factory=function(t,e){var n,i=[];"undefined"==typeof e&&(e={});for(var o,s=0;o=t[s];s++)n=new this(o,e),i[i.length]=n;return i},jindo.m.Component.getInstance=function(){throw new Error("JC 1.11.0 or JMC 1.13.0 later, getInstance method of Component is not longer supported.")},jindo.m.Component.VERSION="1.13.0",jindo.m.Morph=jindo.$Class({$init:function(t){this.option({fEffect:jindo.m.Effect.linear,bUseTransition:!0}).option(t);var e=document.body.style;this._bTransitionSupport="transition"in e||"webkitTransition"in e||"MozTransition"in e||"OTransition"in e||"msTransition"in e;var n=jindo.$Agent(),i=n.os(),o=n.navigator();this._bHasTransformRenderBug=i.ios&&5===parseInt(i.version,10)&&o.msafari,this._aQueue=[],this._aIngItem=null,this._oTimer=null,this._bPlaying=null,this._nPtr=0,this._nPausePassed=0,this._aRepeat=[],this._sTransitionEnd="webkitTransition"in e&&"webkitTransitionEnd"||"transition"in e&&"transitionend"||"MozTransition"in e&&"transitionend"||"OTransition"in e&&"oTransitionEnd"||"msTransition"in e&&"MSTransitionEnd"},pushAnimate:function(t,e){if(e&&!(e instanceof Array))throw Error("aLists should be a instance of Array");return e=[].concat(e),e.duration=t,this._aQueue.push(e),this},pushWait:function(){for(var t=0,e=arguments.length;e>t;t++){var n=arguments[t];n instanceof this.constructor?this._aQueue.push(n):this.pushAnimate(n,[])}return this},pushCall:function(t){return this._aQueue.push(t),this},pushRepeatStart:function(t){"undefined"==typeof t&&(t=1);var e="L"+Math.round((new Date).getTime()*Math.random());return this._aRepeat.push(e),this._pushLabel(e,t),this},_pushLabel:function(t,e){return"undefined"==typeof e&&(e=1/0),this._aQueue.push({action:"label",args:{label:t,times:e}}),this},pushRepeatEnd:function(){var t=this,e=this._aRepeat.pop(),n=function(){var n=t._getLabelIndex(e);if(-1===n)throw"Repeat calls don't matched.";var i=this._aQueue[n];i.args.count=i.args.count||0,++i.args.count<i.args.times&&t._goto(n+1)};return n.__repeat_end=e,this.pushCall(n),this},_waitMorph:function(t){var e=this;if(!t.isPlaying())return!0;var n=function(){t.detach("end",n).detach("pause",n),e._flushQueue()};return t.attach("end",n).attach("pause",n),!1},_getLabelIndex:function(t){for(var e=null,n=0,i=this._aQueue.length;i>n;n++)if(e=this._aQueue[n],"label"===e.action&&e.args.label===t)return n;return-1},_getRepeatEndIndex:function(t,e){for(var n=null,i=e||0,o=this._aQueue.length;o>i;i++)if(n=this._aQueue[i],n instanceof Function&&n.__repeat_end===t)return i;return-1},_flushQueue:function(){var t,e,n=this;do{if(t=!1,e=this._aIngItem=this._aQueue[this._nPtr],!e)return this._bPlaying=!1,void(e||this.fireEvent("end"));if(this._nPtr++,e instanceof Function)e.call(this),t=!0;else if(e instanceof this.constructor)t=this._waitMorph(e);else if("number"!=typeof e)if("label"!==e.action)if("goto"!==e.action){var i=this._aCompiledItem,o=this._nPausePassed;if(o){for(var s=0,h=i.length;h>s;s++)i[s].sTimingFunc="";i.allCSS=!1}else i=this._aCompiledItem=this._compileItem(e);t=i.duration<0,t?this._processItem(1,!0):(this._playItem(o),this._nPausePassed=0)}else this._goto(e.args.label),t=!0;else{if(delete e.args.count,e.args.times<1){var a=this._getRepeatEndIndex(e.args.label,this._nPtr);a>-1&&this._goto(a+1)}t=!0}else setTimeout(function(){n._flushQueue()},e)}while(t)},_playItem:function(t){var e=this;this._nStart=(new Date).getTime()-t,this._nIng=2,t||this._processItem(0,!0,3,!0);var n=this._aCompiledItem;n.allCSS?this._nIng--:this._animationLoop(!0),function(){var t=e._processItem(1,!0,1).transitionCache;if(!t||0===n.duration)return void(0===--e._nIng&&e._flushQueue());for(var i=null,o=t.length,s=0;o>s;s++)if(t[s].visible()){i=t[s];
break}var h=function(n){for(var i,o=[];i=t.pop();)i.css(e._getCSSKey("transitionDuration"),"0.0001ms"),o.push(i);t=null,(window.requestAnimationFrame||window.setTimeout)(function(){for(;i=o.pop();)i.css(e._getCSSKey("transitionDuration"),"0"),i.css(e._getCSSKey("transitionProperty"),"none");o=null},0),e.fireEvent("transitionEnd"),0!==--e._nIng||n||e._requestAnimationFrame(function(){e._flushQueue()})};if(!i)return void h();var a=i.$value(),r=function(t){a.removeEventListener(e._sTransitionEnd,e._fpOnTransitionEnd,!0),e._fpOnTransitionEnd=null,h(t===!0)};e._fpOnTransitionEnd=function(t){r(t)},a.addEventListener(e._sTransitionEnd,e._fpOnTransitionEnd,!0)}()},_animationLoop:function(t){var e=this;this._oTimer=this._requestAnimationFrame(function(){var n=e._nStart,i=e._aCompiledItem.duration;if(null!==e._oTimer){e._oTimer=null;var o=Math.min(1,Math.max(0,((new Date).getTime()-n)/i));e._processItem(o,t,2),1>o?e._animationLoop():(e.fireEvent("timerEnd"),0===--e._nIng&&e._flushQueue())}})},_processItem:function(t,e,n,i){var o={normalPropsToPause:[],transitionCache:[]},s=o.normalPropsToPause,h=o.transitionCache,a=this._aCompiledItem,r=a.duration;0===r?r=1:0>r&&(r=0);var l,c,f,_,u,d,m=this._bHasTransformRenderBug;if(n=n||3,this.fireEvent("beforeProgress",{nRate:t})){for(var p,v,E=[],g=0;v=a[g];g++){l=v.oObj,c=v.welObj,f=v.oProps;var I=v.sTimingFunc;I&&1&n&&(c&&c.$value().clientHeight,"@transition"in f||i||("@transitionProperty"in f||c.css(this._getCSSKey("transitionProperty"),"all"),"@transitionDuration"in f||c.css(this._getCSSKey("transitionDuration"),(r/1e3).toFixed(3)+"s"),"@transitionTimingFunction"in f||c.css(this._getCSSKey("transitionTimingFunction"),I)),h.push(c)),p={},E.push(l,p),i&&1===t&&"@transform"in f&&/AppleWebKit\/534\.30/.test(navigator.userAgent)&&(c.css(this._getCSSKey("transform"),""),l.clientHeight);for(var T in f)if(f.hasOwnProperty(T)){if(_=f[T],d=/^@(.*)$/.test(T)&&RegExp.$1,u=I&&d?1:2,!(n&u))continue;if("function"==typeof _)_=_(t);else if(!e)continue;d?(/transition/.test(T)&&(_=this._getCSSVal(_)),m&&"@transform"===T&&("@left"in f||"@top"in f)&&l.clientHeight,c.css(this._getCSSKey(d),_)):i?s.push([l,T,_]):l[T]=_,p[T]=_}}return this.fireEvent("progress",{aLists:E,nRate:t}),o}},_compileItem:function(t){var e=0==t.length,n=[];n.duration=t.duration;for(var i,o,s,h,a,r,l,c,f=this.option("fEffect"),_=0,u=t.length;u>_;_+=2){var d=null;i=t[_],o=jindo.$Element(i),s=t[_+1],r={};for(var m in s)if(s.hasOwnProperty(m)){var p,v;if(a=s[m],l=/^@(.*)$/.test(m),c=RegExp.$1,a instanceof Array?(h=a[0],a=a[1]):h=l?o.css(this._getCSSKey(c)):i[m],h=0===h?h:h||"",p="function"==typeof a?a.effectConstructor:f,v=this._getEffectCSS(p)||"",l?null===d?d=v:d!==v&&(d=""):v="",/^@transform$/.test(m))r[m]=this._getTransformFunction(h,a,p);else try{"function"==typeof a?("setStart"in a&&a.setStart(h),r[m]=a):r[m]=p(h,a)}catch(E){if(!/^unit error/.test(E.message))throw E;r[m]=a}e=e||!d}n.push({oObj:i,welObj:o,oProps:r,sTimingFunc:d})}return n.allCSS=!e,n},play:function(){return this._bPlaying||(this._bPlaying=!0,this.fireEvent("play"),this._flushQueue()),this},reset:function(){return this._goto(0)},pause:function(t){if(!this._bPlaying)return this;this._cancelAnimationFrame(this._oTimer),this._oTimer=null;var e=this._aCompiledItem.duration;if("undefined"==typeof t){var n=(new Date).getTime()-this._nStart;t=n/e}t=Math.max(0,Math.min(1,t));var i=this._processItem(t,!0,3,!0,"DEBUG").normalPropsToPause;this._nPtr--,this._nPausePassed=Math.round(e*t),this._fpOnTransitionEnd&&this._fpOnTransitionEnd(!0);for(var o=0,s=i.length;s>o;o++){var h=i[o];h[0][h[1]]=h[2]}return this._bPlaying=!1,this.fireEvent("pause"),this},_goto:function(t){var e=t;if("number"==typeof t)t=t||0;else{if(t=this._getLabelIndex(e),-1===t)throw"Label not found";t++}return this._nPtr=t,this._nPausePassed=0,this},isPlaying:function(){return this._bPlaying||!1},clear:function(){return this._aQueue.length=0,this._aRepeat.length=0,this._nPtr=0,this._nPausePassed=0,this},_getPointer:function(){return this._nPtr},_oProperPrefix:{},_getProperPrefix:function(t){var e=this._oProperPrefix;if(t in e)return e[t];for(var n,i,o=document.body.style,s=["webkit","","Moz","O","ms"],h=0,a=s.length;a>h;h++)if(n=s[h],i=n+(n?t.replace(/^[a-z]/,function(t){return t.toUpperCase()}):t),i in o)return e[t]=n;return e[t]=""},_getCSSKey:function(t){var e=this,n="",i=t.replace(/^(\-(webkit|o|moz|ms)\-)?([a-z]+)/,function(t,i,o,s){return n=o||e._getProperPrefix(s),n&&(s=s.replace(/^[a-z]/,function(t){return t.toUpperCase()})),s}).replace(/\-(\w)/g,function(t,e){return e.toUpperCase()});return({o:"O",moz:"Moz",webkit:"Webkit"}[n]||n)+i},_getCSSVal:function(t){var e=this,n=t.replace(/(^|\s)(\-(webkit|moz|o|ms)\-)?([a-z]+)/g,function(t,n,i,o,s){return o=o||e._getProperPrefix(s),n+(o&&"-"+o+"-")+s});return n},_parseTransformText:function(t){t=t||"";var e={};return t.replace(/([\w\-]+)\(([^\)]*)\)/g,function(t,n,i){var o=i.split(/\s*,\s*/);switch(n){case"translate3d":case"scale3d":case"skew3d":n=n.replace(/3d$/,""),e[n+"Z"]=o[2];case"translate":case"scale":case"skew":e[n+"X"]=o[0],"undefined"==typeof o[1]?"scale"===n&&(e[n+"Y"]=o[0]):e[n+"Y"]=o[1];break;default:e[n]=o.join(",")}}),e},_getTransformFunction:function(t,e,n){var i,o=this._parseTransformText(t),s=this._parseTransformText(e),h={};for(i in o)o.hasOwnProperty(i)&&(h[i]=n(o[i],s[i]||(/^scale/.test(i)?1:0)));for(i in s)!s.hasOwnProperty(i)||i in o||(h[i]=n(o[i]||(/^scale/.test(i)?1:0),s[i]));var a=function(t){var e=[];for(var n in h)h.hasOwnProperty(n)&&e.push(n+"("+h[n](t)+")");return e.join(" ")};return a},_getEffectCSS:function(t){var e=this.option("bUseTransition")&&this._bTransitionSupport;if(!e)return null;if(this._htEventHandler.progress&&this._htEventHandler.progress.length||this._htEventHandler.beforeProgress&&this._htEventHandler.beforeProgress.length)return null;switch(t){case jindo.m.Effect.linear:return"linear";case jindo.m.Effect.cubicEase:return"ease";case jindo.m.Effect.cubicEaseIn:return"ease-in";case jindo.m.Effect.cubicEaseOut:return"ease-out";case jindo.m.Effect.cubicEaseInOut:return"ease-in-out";default:if(t.cubicBezier&&Math.max.apply(Math,t.cubicBezier)<=1&&Math.min.apply(Math,t.cubicBezier)>=0)return"cubic-bezier("+t.cubicBezier.join(",")+")"}return null},_requestAnimationFrame:function(t){var e,n=this,i=function(){e===n._oLastRAF&&(n._oLastRAF=null,t())};return e=window.requestAnimationFrame?requestAnimationFrame(i):setTimeout(i,1e3/60),this._oLastRAF=e},_cancelAnimationFrame:function(t){var e;return e=window.cancelAnimationFrame?cancelAnimationFrame(t):clearTimeout(t),this._oLastRAF=null,e}}).extend(jindo.m.Component),jindo.m.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=!1},isActivating:function(){return this._bIsActivating},activate:function(){return this.isActivating()?this:(this._bIsActivating=!0,arguments.length>0?this._onActivate.apply(this,arguments):this._onActivate(),this)},deactivate:function(){return this.isActivating()?(this._bIsActivating=!1,arguments.length>0?this._onDeactivate.apply(this,arguments):this._onDeactivate(),this):this}}).extend(jindo.m.Component),jindo.m.Animation=jindo.$Class({$init:function(t){this.option({bUseH:!0,bHasOffsetBug:!1,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction()}),this.option(t||{}),this._initVar()},_initVar:function(){this.sCssPrefix=jindo.m.getCssPrefix(),this._htTans=this.option("bUseCss3d")?{open:"3d(",end:",0)"}:{open:"(",end:")"},this._oMorph=new jindo.m.Morph({fEffect:this.option("fEffect"),bUseTransition:this.option("bUseTimingFunction")}).attach({end:jindo.$Fn(function(t){this._oMorph.clear(),this.fireEvent("end",t)},this).bind()}),this._welTarget=null},setStyle:function(){},move:function(){},getTarget:function(t){return t?this._welTarget:this._welTarget.$value()},p:function(t){return t.length<=0?t:(t=""==this.sCssPrefix?t.charAt(0).toLowerCase()+t.substr(1):t.charAt(0).toUpperCase()+t.substr(1),this.sCssPrefix+t)},getTranslate:function(t,e){return"translate"+this._htTans.open+t+","+e+this._htTans.end},toCss:function(t){var e,n,i,o={};for(e in t)n=e,/^@/.test(e)&&(e.match(/^(@\w)/),i=RegExp.$1,/transition|transform/.test(n)?(n=""==this.sCssPrefix?e.replace(i,i.toLowerCase()):e.replace(i,i.toUpperCase()),n=n.replace("@",this.sCssPrefix)):n=n.replace("@","")),o[n]=t[e];return o},isPlaying:function(){return this._oMorph.isPlaying()},stop:function(t){"undefined"==typeof t&&(t=0),this._oMorph.pause(t).clear()},destroy:function(){this._oMorph.detachAll("progress")}}).extend(jindo.m.UIComponent),jindo.m.Cube=jindo.$Class({$init:function(t){t=t||{},this.option(t.htOption||{})},_initVar:function(t){jindo.m.Animation.prototype._initVar.call(this,t),this._sRotate=this.option("bUseH")?"Y":"X"},setStyle:function(t){var e={};return e[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",e[this.p("Transform")]="translateZ(-"+t[1]+"px) rotate"+this._sRotate+"(0deg)",this.option("bUseH")&&(e.clear="both"),e.position="relative",e[this.p("TransformStyle")]="preserve-3d",this._welTarget=t[0].container.css(e),t[0].view.css(this.p("Perspective"),4*t[1]+"px"),this.fireEvent("set",{css:e}),e},move:function(t,e,n,i){i||(i={});var o=this.option("bUseH")?t:-e;o=45*o/i.nHalpSize;var s=this.getTarget(!0),h={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":"translateZ(-"+i.nHalpSize+"px) rotate"+this._sRotate+"("+o+"deg)"};return n?this._oMorph.pushAnimate(n,[s,h]):s.css(this.toCss(h)),this._oMorph}}).extend(jindo.m.Animation),jindo.m.Slide=jindo.$Class({$init:function(t){this.option({}),this.option(t||{})},setStyle:function(t){var e={};return e[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",e[this.p("TransitionDuration")]="0ms",e[this.p("Transform")]=this.getTranslate(0,0),this._welTarget=t[0].css(e),this.fireEvent("set",{css:e}),e},move:function(t,e,n,i){i=i||{};var o,s=this.getTarget(!0);if(i.useCircular)this.option("bUseH")?t=this._getPos(t,i):e=this._getPos(e,i);else if(this.option("bHasOffsetBug")){var h=jindo.m.getStyleOffset(s);t-=h.left,e-=h.top}return o={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":this.getTranslate(t+"px",e+"px")},n?this._oMorph.pushAnimate(n,[s,o]):s.css(this.toCss(o)),this._oMorph},_getPos:function(t,e){var n=t,i=e.next,o=e.range;if(e.restore)n=0;else if(0!=e.duration&&t%o===0)n=i?-o:o;else if("undefined"!=typeof e.startIndex){var s=-1*parseInt(n/o,10);i=s==e.startIndex||s>e.startIndex?!0:!1,n=n%o+(i?-1:1)*Math.abs(s-e.startIndex)*o}else n=n%o+(i?0:2*o),n%=o;return n}}).extend(jindo.m.Animation),jindo.m.LayerEffect=jindo.$Class({$init:function(t,e){this.option({nDuration:250,fEffect:jindo.m.Effect.linear,bActivateOnload:!0}),this._initVar(),arguments[0]&&1==arguments[0].nodeType?(this.setLayer(t),this.option(e||{})):this.option(arguments[0]||{}),this._initTransition(),this.option("bActivateOnload")&&this.activate()},_htEffect:{expand:"jindo.m.ExpandEffect",contract:"jindo.m.ContractEffect",fade:"jindo.m.FadeEffect",pop:"jindo.m.PopEffect",slide:"jindo.m.SlideEffect",flip:"jindo.m.FlipEffect"},_initVar:function(){this._htEffectInstance={},this._htLayerInfo={},this._htWElement={},this._htCurrentTask={},this.bAndroid=jindo.m.getDeviceInfo().android,this.sClassHighligting="_effct_hide_highlighting_tmp"},_initTransition:function(){this._oMorph=new jindo.m.Morph({fEffect:this.option("fEffect")||this._getEffect(this.option("sTransitionTimingFunction"))})},_getEffect:function(t){var e=jindo.m.Effect.cubicEaseInOut;switch(t){case"linear":e=jindo.m.Effect.linear;break;case"ease":e=jindo.m.Effect.cubicEase;break;case"ease-in":e=jindo.m.Effect.cubicEaseIn;break;case"ease-out":e=jindo.m.Effect.cubicEaseOut;break;case"ease-in-out":e=jindo.m.Effect.cubicEaseInOut}return e},_createEffect:function(sType){if(this._htEffect[sType]&&!this._htEffectInstance[sType]){try{this._htEffectInstance[sType]=eval("new "+this._htEffect[sType]+"()")}catch(e){}this._htEffectInstance[sType].setLayerInfo(this._htLayerInfo)}},_createFunc:function(){for(var t=["slide","pop","flip","fade","expand","contract"],e=0,n=t.length;n>e;e++)this[t[e]]=function(t){return function(e){var n=t;if(1==arguments[0].nodeType){this.setLayer(arguments[0]);var i=arguments[2]||{};i.sDirection=arguments[1],this._run(n,i)}else this._run(n,e)}}(t[e])},isPlaying:function(){return this._oMorph.isPlaying()},_fireCustomEvent:function(t,e){return this.fireEvent(t,e)},_run:function(t,e){if(this._isAvailableEffect()){this._createEffect(t),"undefined"==typeof e&&(e={});var n=this._htEffectInstance[t],i=this.getLayer(),o="undefined"==typeof e.nDuration?this.option("nDuration"):parseInt(e.nDuration,10),s=n.getBeforeCommand(i,e),h=n.getCommand(i,e);if(this._htCurrentTask=e,this._htCurrentTask.elLayer=i,this._htCurrentTask.sTaskName=h.sTaskName,this._htCurrentTask.nDuration=o,this._fireCustomEvent("beforeEffect",{elLayer:i,sEffect:h.sTaskName,nDuration:o})){s&&this._oMorph.pushAnimate(-1,[this.getLayer(),s.htStyle]);var a=this;e.sTransitionTimingFunction&&this._oMorph.pushCall(function(){this.option({fEffect:a._getEffect(e.sTransitionTimingFunction)})}),o=0==o?-1:o,this._oMorph.pushAnimate(o,[this.getLayer(),h.htStyle]),h.fCallback&&("function"==typeof h.fCallback?this._oMorph.pushCall(function(){h.fCallback()}):"object"==typeof h.fCallback&&this._oMorph.pushAnimate(-1,[this.getLayer(),h.fCallback.htStyle||{}])),this._oMorph.play()}}},setLayer:function(t){this._htWElement.el=jindo.$(t),this._htWElement.wel=jindo.$Element(this._htWElement.el);var e;if(this.bAndroid&&(e=jindo.$$.getSingle("."+this.sClassHighligting,this._htWElement.el),!e)){var n='<a href="javascript:void(0)" style="position:absolute" class="'+this.sClassHighligting+'"></a>';e=jindo.$(n),this._htWElement.wel.append(e),e.style.opacity="0",e.style.width=0,e.style.height=0,e.style.left="-1000px",e.style.top="-1000px"}this.setSize()},stop:function(t){"undefined"==typeof t&&(t=!0),this._oMorph&&this._oMorph.pause(t)},clearEffect:function(t){this._oMorph&&(this.stop(t),this._oMorph.clear())},getLayer:function(){return this._htWElement.el},setSize:function(){var t=this._htWElement.el.cloneNode(!0),e=jindo.$Element(t);e.opacity(0),this._htWElement.wel.after(e),e.show(),this._htLayerInfo.nWidth=this._htWElement.wel.width(),this._htLayerInfo.nHeight=this._htWElement.wel.height(),e.css({position:"absolute",top:"0px",left:"0px"}),this._htLayerInfo.nMarginLeft=parseInt(e.css("marginLeft"),10),this._htLayerInfo.nMarginTop=parseInt(e.css("marginTop"),10),this._htLayerInfo.nMarginLeft=isNaN(this._htLayerInfo.nMarginLeft)?0:this._htLayerInfo.nMarginLeft,this._htLayerInfo.nMarginTop=isNaN(this._htLayerInfo.nMarginTop)?0:this._htLayerInfo.nMarginTop,this._htLayerInfo.nOpacity=this._htWElement.wel.opacity(),this._htLayerInfo.sPosition=this._htWElement.wel.css("position");var n=this._htWElement.wel.css("display");n="none"===n||0===n.length?"block":n,this._htLayerInfo.sDisplay=n,this._htLayerInfo.sClassHighligting=this.sClassHighligting,e.leave(),this._setEffectLayerInfo()},_setEffectLayerInfo:function(){for(var t in this._htEffectInstance)this._htEffectInstance[t].setLayerInfo(this._htLayerInfo)},_onTransitionEnd:function(){this._htCurrentTask&&this._fireCustomEvent("afterEffect",{elLayer:this._htCurrentTask.elLayer,sEffect:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})},_onTransitionStop:function(t){t.sTaskName&&this._fireCustomEvent("stop",{elLayer:this._htCurrentTask.elLayer,sEffect:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})},_isAvailableEffect:function(){return this.isActivating()},_onActivate:function(){this._attachEvent(),this._createFunc()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.end=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.stop=jindo.$Fn(this._onTransitionStop,this).bind(),this._oMorph&&this._oMorph.attach({end:this._htEvent.end,stop:this._htEvent.stop})},_detachEvent:function(){this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m._Effect_=jindo.$Class({$init:function(){this._sCssPrefix=jindo.m.getCssPrefix();var t=jindo.m.getDeviceInfo();this.bIos=t.iphone||t.ipad,this.bIos3=t.iphone&&t.version.length>0&&"3"==t.version.substring(0,1),this.bAndroid=t.android,this.bAndroid3Up=t.android&&t.version.length>0&&t.version.substring(0,1)>="3",this.bAndroid2_1=t.android&&t.version.length>0&&"2.1"===t.version,this.sTranOpen=this.bIos?"translate3d(":"translate(",this.sTranEnd=this.bIos?",0px)":")",this._initVar()},_initVar:function(){this._htLayerInfo={}},setLayerInfo:function(t){this._htLayerInfo={};for(var e in t)this._htLayerInfo[e]=t[e]},getTranslateStyle:function(t,e){var n=e||{};for(var i in t)n["@"+i]=t[i];return n},getTransitionTask:function(){return null},getBeforeCommand:function(){return null},getCommand:function(){return null}}),jindo.m.FadeEffect=jindo.$Class({sEffectName:"fade",getCommand:function(t,e){e.htTo||(e.htTo={}),e.nDistance&&(e.htTo.opacity=e.nDistance);var n=e.sDirection?e.sDirection:"in",i=e.htTo||{},o="in"==n?1:0;i.opacity="undefined"!=typeof i.opacity?i.opacity:o;var s={};"out"==n&&(s.htStyle={},s.htStyle["@display"]="none",s.htStyle["@opacity"]=this._htLayerInfo.nOpacity);var h={};return this.getTranslateStyle(i,h),{sTaskName:this.sEffectName+"-"+n,htStyle:h,fCallback:s}},getBeforeCommand:function(t,e){var n=e.sDirection?e.sDirection:"in",i=e.htFrom||{},o="in"==n?0:1;i.display=this._htLayerInfo.sDisplay,i.opacity="undefined"==typeof i.opacity?o:i.opacity;var s={};return this.getTranslateStyle(i,s),{htStyle:s,htTransform:{}}}}).extend(jindo.m._Effect_),jindo.m.SlideEffect=jindo.$Class({sEffectName:"slide",getCommand:function(t,e){e.nDistance&&(e.nSize=e.nDistance);var n,i,o,s=e.sDirection?e.sDirection:"left",h=jindo.m.getCssOffset(t),a=h.left,r=h.top;if(n="undefined"!=typeof e.nSize?e.nSize:this._htLayerInfo.nWidth,i="undefined"!=typeof e.nSize?e.nSize:this._htLayerInfo.nHeight,("up"==s||"down"==s)&&(r+="up"==s?-1*i:i),("left"==s||"right"==s)&&(a+="left"==s?-1*n:n),"undefined"!=typeof e.elBaseLayer){a=0,r=0;var l=jindo.$Element(e.elBaseLayer);o=jindo.$Element(t),i="undefined"!=typeof e.nSize?e.nSize:l.height(),n="undefined"!=typeof e.nSize?e.nSize:l.width(),("up"==s||"down"==s)&&(r="down"==s?-1*i:i),("left"==s||"right"==s)&&(a="left"==s?n:-1*n),a=-1*a,r=-1*r}var c=this._htLayerInfo.sPosition,f=this.bAndroid,_=this.bAndroid3Up,u=this._htLayerInfo.sClassHighligting,d=this.bAndroid2_1;o=jindo.$Element(t);var m=e.htTo||{};m.transform=this.sTranOpen+a+"px, "+r+"px"+this.sTranEnd;var p={};return this.getTranslateStyle(m,p),{sTaskName:this.sEffectName+"-"+s,htStyle:p,fCallback:function(){var e=jindo.m.getCssOffset(t),n=1*o.css("top").replace("px",""),i=1*o.css("left").replace("px","");n=isNaN(n)?0:n,i=isNaN(i)?0:i,"relative"==c?o.css("position","relative"):o.css("position","absolute");var s=jindo.m.getCssPrefix();if(o.css(s+"Transform",""),_&&o.offset(),o.$value().style.top=parseInt(n+e.top,10)+"px",o.$value().style.left=parseInt(e.left+i,10)+"px",f&&!_){var h=jindo.$$.getSingle("."+u,o.$value());h&&(d?setTimeout(function(){h.focus()},5):h.focus())}}}},getBeforeCommand:function(t,e){var n=e.sDirection?e.sDirection:"left",i=e.htFrom||{},o=jindo.$Element(t);if("undefined"!=typeof e.elBaseLayer){var s=jindo.$Element(e.elBaseLayer);if(!s.isParentOf(o)){s.append(o);var h=o.css("position");"relative"!=h&&"absolute"!=h&&o.css("position","absolute"),o.css("opacity",0)}var a=0,r=0,l=s.height(),c=s.width();("up"==n||"down"==n)&&(r="down"==n?-1*l:l),("left"==n||"right"==n)&&(a="left"==n?c:-1*c),s.css("overflow","hidden"),i.left=a+"px",i.top=r+"px",i.opacity=this._htLayerInfo.nOpacity}var f={};return this.getTranslateStyle(i,f),{htStyle:f}}}).extend(jindo.m._Effect_),jindo.m.Touch=jindo.$Class({$init:function(t,e){this._el=jindo.$(t);var n={nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1e3,nDoubleTapDuration:400,nTapThreshold:6,nPinchThreshold:.1,nRotateThreshold:5,nEndEventThreshold:0,bActivateOnload:!0,bVertical:!0,bHorizental:!1};this.option(n),this.option(e||{}),this._initVariable(),this._setSlope(),this.option("bActivateOnload")&&this.activate()},_initVariable:function(){if(this._hasTouchEvent=!1,this._htEventName=jindo.m._getTouchEventName(),this._htEventName.start.indexOf("touch")>-1)this._hasTouchEvent=!0;else if(this._htEventName.start.indexOf("MSPointer")>-1&&"undefined"!=typeof this._el.style.msTouchAction){var t="none";this.option("bHorizental")&&!this.option("bVertical")&&(t="pan-x"),this.option("bVertical")&&!this.option("bHorizental")&&(t="pan-y"),this._el.style.msTouchAction=t}this._radianToDegree=180/Math.PI,this._htMoveInfo={nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0,nStartDistance:0,nBeforeDistance:0,nStartAngle:0,nLastAngle:0},this.bStart=!1,this.bMove=!1,this.nMoveType=-1,this.htEndInfo={},this._nVSlope=0,this._nHSlope=0,this.bSetSlope=!1},_attachEvents:function(){this._htEvent={};this._hasTouchEvent;this._htEvent[this._htEventName.start]={fn:jindo.$Fn(this._onStart,this).bind(),el:this._el},this._htEvent[this._htEventName.move]={fn:jindo.$Fn(this._onMove,this).bind(),el:this._el},this._htEvent[this._htEventName.end]={fn:jindo.$Fn(this._onEnd,this).bind(),el:this._el},this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),this._htEventName.cancel&&(this._htEvent[this._htEventName.cancel]={fn:jindo.$Fn(this._onCancel,this).bind(),el:this._el});for(var t in this._htEvent)this._htEvent[t].fn&&(this._htEvent[t].ref=jindo.m._attachFakeJindo(this._htEvent[t].el,this._htEvent[t].fn,t))},_detachEvents:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref&&e.ref.detach(e.el,t)}jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_onCancel:function(t){this._onEnd(t)},_onStart:function(t){this._resetTouchInfo();for(var e=this._getTouchInfo(t),n=[],i=[],o=0,s=e.length;s>o;o++)n.push(e[o].nX),i.push(e[o].nY);var h={element:e[0].el,nX:e[0].nX,nY:e[0].nY,aX:n,aY:i,oEvent:t};this._fireCustomEvent("touchStart",h)&&(this.bStart=!0,this._htMoveInfo.nStartX=e[0].nX,this._htMoveInfo.nBeforeX=e[0].nX,this._htMoveInfo.nStartY=e[0].nY,this._htMoveInfo.nBeforeY=e[0].nY,this._htMoveInfo.nStartTime=e[0].nTime,this._htMoveInfo.aStartInfo=e,this._startLongTapTimer(e,t))},_onMove:function(t){if(this.bStart){this.bMove=!0;var e=this._getTouchInfo(t),n=this._getCustomEventParam(e,!1);if(1===e.length){if(this.nMoveType<0||3==this.nMoveType||4==this.nMoveType){var i=this._getMoveType(e);(4!=this.nMoveType||3!=i)&&(this.nMoveType=i)}}else 8!==this.nMoveType&&(this.nMoveType=this._getMoveType(e));n=this._getCustomEventParam(e,!1),"undefined"!=typeof this._nLongTapTimer&&3!=this.nMoveType&&this._deleteLongTapTimer(),n.oEvent=t;var o=0;if(o=0==this.nMoveType?Math.abs(n.nVectorX):1==this.nMoveType?Math.abs(n.nVectorY):Math.abs(n.nVectorX)+Math.abs(n.nVectorY),!(o<this.option("nMoveThreshold"))){if(!this.fireEvent("touchMove",n))return void(this.bStart=!1);this._htMoveInfo.nBeforeX=e[0].nX,this._htMoveInfo.nBeforeY=e[0].nY,this._htMoveInfo.nBeforeTime=e[0].nTime}}},_onEnd:function(t){if(this.bStart){var e=this;if(this._deleteLongTapTimer(),this._deleteEndEventTimer(),this.bMove||4==this.nMoveType||(this.nMoveType=3),!(this.nMoveType<0)){var n=this._getTouchInfo(t);this._isDblTap(n[0].nX,n[0].nY,n[0].nTime)&&(clearTimeout(this._nTapTimer),delete this._nTapTimer,this.nMoveType=5);var i=this._getCustomEventParam(n,!0);i.oEvent=t;var o=i.sMoveType;"undefined"!=typeof this._htEventHandler[jindo.m.MOVETYPE[5]]&&this._htEventHandler[jindo.m.MOVETYPE[5]].length>0&&3==this.nMoveType?this._nTapTimer=setTimeout(function(){e.fireEvent("touchEnd",i),e._fireCustomEvent(o,i),delete e._nTapTimer},this.option("nDoubleTapDuration")):(this.fireEvent("touchEnd",i),4!=this.nMoveType&&(8===this.nMoveType?(i.sMoveType=jindo.m.MOVETYPE[6],this._fireCustomEvent(jindo.m.MOVETYPE[6],i),i.sMoveType=jindo.m.MOVETYPE[7],this._fireCustomEvent(jindo.m.MOVETYPE[7],i)):setTimeout(function(){e._fireCustomEvent(o,i)},0))),this._updateTouchEndInfo(n),this._resetTouchInfo()}}},_startEndEventTimer:function(t){var e=this;this._nEndEventTimer=setTimeout(function(){e._onEnd(t),delete e._nEndEventTimer},e.option("nEndEventThreshold"))},_deleteEndEventTimer:function(){"undefined"!=typeof this._nEndEventTimer&&(clearTimeout(this._nEndEventTimer),delete this._nEndEventTimer)},_fireCustomEvent:function(t,e){return this.fireEvent(t,e)},_getCustomEventParam:function(t,e){var n=jindo.m.MOVETYPE[this.nMoveType],i=t[0].nTime-this._htMoveInfo.nStartTime,o=0,s=0,h=0,a=0,r=0,l=0,c=0,f=0;c=1===this.nMoveType?0:t[0].nX-this._htMoveInfo.nStartX,f=0===this.nMoveType?0:t[0].nY-this._htMoveInfo.nStartY,o=t[0].nX-this._htMoveInfo.nBeforeX,s=t[0].nY-this._htMoveInfo.nBeforeY,!e||0!=this.nMoveType&&1!=this.nMoveType&&2!=this.nMoveType||i<=this.option("nMomentumDuration")&&(r=Math.abs(c)/i,h=r*r/2,l=Math.abs(f)/i,a=l*l/2);var _={element:t[0].el,nX:t[0].nX,nY:t[0].nY,nVectorX:o,nVectorY:s,nDistanceX:c,nDistanceY:f,sMoveType:n,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime};if((t.length>1||this.nMoveType>=6)&&(_.nScale=this._getScale(t),_.nRotation=this._getRotation(t),null===_.nScale&&(_.nScale=this._htMoveInfo.nBeforeScale),null===_.nRotation&&(_.nRotation=this._htMoveInfo.nBeforeRotation)),t.length>=1){for(var u=[],d=[],m=[],p=0,v=t.length;v>p;p++)u.push(t[p].nX),d.push(t[p].nY),m.push(t[p].el);t[t.length-1].nX,_.aX=u,_.aY=d,_.aElement=m}return e&&(_.nMomentumX=h,_.nMomentumY=a,_.nSpeedX=r,_.nSpeedY=l,_.nDuration=i),_},_updateTouchEndInfo:function(t){this.htEndInfo={element:t[0].el,time:t[0].nTime,movetype:this.nMoveType,nX:t[0].nX,nY:t[0].nY}},_deleteLongTapTimer:function(){"undefined"!=typeof this._nLongTapTimer&&(clearTimeout(this._nLongTapTimer),delete this._nLongTapTimer)},_startLongTapTimer:function(t,e){var n=this;"undefined"!=typeof this._htEventHandler[jindo.m.MOVETYPE[4]]&&this._htEventHandler[jindo.m.MOVETYPE[4]].length>0&&(n._nLongTapTimer=setTimeout(function(){n.fireEvent("longTap",{element:t[0].el,oEvent:e,nX:t[0].nX,nY:t[0].nY}),delete n._nLongTapTimer,n.nMoveType=4},n.option("nLongTapDuration")))},_onResize:function(){this._setSlope()},_isDblTap:function(t,e){if("undefined"!=typeof this._nTapTimer&&3==this.nMoveType){var n=this.option("nTapThreshold");if(Math.abs(this.htEndInfo.nX-t)<=n&&Math.abs(this.htEndInfo.nY-e)<=n)return!0}return!1},_setSlope:function(){this.bSetSlope||(this._nHSlope=1*(window.innerHeight/2/window.innerWidth).toFixed(2),this._nVSlope=1*(window.innerHeight/(window.innerWidth/2)).toFixed(2))},setSlope:function(t,e){this._nHSlope=e,this._nVSlope=t,this.bSetSlope=!0},getSlope:function(){return{nVSlope:this._nVSlope,nHSlope:this._nHSlope}},_resetTouchInfo:function(){for(var t in this._htMoveInfo)this._htMoveInfo[t]=0;this._deleteLongTapTimer(),this.bStart=!1,this.bMove=!1,this.nMoveType=-1},_getMoveTypeBySingle:function(t,e){var n=this.nMoveType,i=Math.abs(this._htMoveInfo.nStartX-t),o=Math.abs(this._htMoveInfo.nStartY-e),s=i+o,h=this.option("nTapThreshold");if(n=h>=i&&h>=o?3:-1,this.option("nSlopeThreshold")<=s){var a=parseFloat((o/i).toFixed(2),10);n=-1===this._nHSlope&&-1===this._nVSlope?2:a<=this._nHSlope?0:a>=this._nVSlope?1:2}return n},_getMoveTypeByMulti:function(){var t=-1;return(6===this.nMoveType||Math.abs(1-this._htMoveInfo.nBeforeScale)>=this.option("nPinchThreshold"))&&(t=6),(7===this.nMoveType||Math.abs(0-this._htMoveInfo.nBeforeRotation)>=this.option("nRotateThreshold"))&&(t=6===t?8:7),-1===t?this.nMoveType:t},_getScale:function(t){var e=-1,n=this._getDistance(t);return 0>=n?null:(0===this._htMoveInfo.nStartDistance?(e=1,this._htMoveInfo.nStartDistance=n):e=n/this._htMoveInfo.nStartDistance,this._htMoveInfo.nBeforeScale=e,e)},_getRotation:function(t){var e=-1,n=this._getAngle(t);return null===n?null:(0===this._htMoveInfo.nStartAngle?(this._htMoveInfo.nStartAngle=n,e=0):e=n-this._htMoveInfo.nStartAngle,this._htMoveInfo.nLastAngle=n,this._htMoveInfo.nBeforeRotation=e,e)},_getMoveType:function(t){var e=this.nMoveType;return 1===t.length?e=this._getMoveTypeBySingle(t[0].nX,t[0].nY):2===t.length&&(e=this._getMoveTypeByMulti(t)),e},_getDistance:function(t){return 1===t.length?-1:Math.sqrt(Math.pow(Math.abs(t[0].nX-t[1].nX),2)+Math.pow(Math.abs(t[0].nY-t[1].nY),2))},_getAngle:function(t){if(1===t.length)return null;var e=t[0].nX-t[1].nX,n=t[0].nY-t[1].nY,i=Math.atan2(n,e)*this._radianToDegree;if(null!==this._htMoveInfo.nLastAngle){var o=Math.abs(this._htMoveInfo.nLastAngle-i),s=i+360,h=i-360;Math.abs(s-this._htMoveInfo.nLastAngle)<o?i=s:Math.abs(h-this._htMoveInfo.nLastAngle)<o&&(i=h)}return i},_getTouchInfo:function(t){var e=[],n=t.$value().timeStamp,i=null;if(this._hasTouchEvent){i="touchend"===t.type?t.$value().changedTouches:t.$value().targetTouches;for(var o=0,s=i.length;s>o;o++)e.push({el:jindo.m.getNodeElement(i[o].target),nX:i[o].pageX,nY:i[o].pageY,nTime:n})}else e.push({el:t.element,nX:t.pos().pageX,nY:t.pos().pageY,nTime:n});return e},getBaseElement:function(){return this._el},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},destroy:function(){var t;this.deactivate(),this._el=null;for(t in this._htMoveInfo)this._htMoveInfo[t]=null;this._htMoveInfo=null;for(t in this.htEndInfo)this.htEndInfo[t]=null;this.htEndInfo=null,this.bStart=null,this.bMove=null,this.nMoveType=null,this._nVSlope=null,this._nHSlope=null,this.bSetSlope=null}}).extend(jindo.m.UIComponent),jindo.m.SwipeCommon=jindo.$Class({$init:function(){this.option({bActivateOnload:!0,bUseHighlight:!0,bUseDiagonalTouch:!0,bUseMomentum:!0,nDeceleration:6e-4,bAutoResize:!0,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),nZIndex:2e3})},_getAnimationOption:function(t){return jindo.$Jindo.mixin({bUseH:this._bUseH,bHasOffsetBug:this._hasOffsetBug(),fEffect:this.option("fEffect"),bUseCss3d:this.option("bUseCss3d"),bUseTimingFunction:this.option("bUseTimingFunction")},t||{})},_initVar:function(){this._htWElement={},this._bUseH=!1,this._bUseV=!1,this._nX=0,this._nY=0,this._bUseDiagonalTouch=this.option("bUseDiagonalTouch"),this._htClickBug={hasBug:jindo.m.hasClickBug(),anchors:null,isBlocked:!1,dummyFnc:function(){return!1},hasDummyFnc:!1,dummyTagForFocus:null},this._htOffsetBug={hasBug:jindo.m.hasOffsetBug()&&this.option("bUseHighlight"),timer:-1,elDummyTag:null},this._htSize={viewWidth:0,viewHeight:0,contWidth:0,contHeight:0,maxX:0,maxY:0},this._isStop=!1,this._oTouch=null,this._oAnimation=null},_setWrapperElement:function(t){this._htWElement.view=jindo.$Element(t),this._htWElement.base=jindo.$Element(this._htWElement.view.query("."+this.option("sClassPrefix")+"base")),this._htWElement.container=this._htWElement.base?this._htWElement.base.query("."+this.option("sClassPrefix")+"container"):this._htWElement.view.query("."+this.option("sClassPrefix")+"container")||this._htWElement.view.first(),this._htWElement.container=jindo.$Element(this._htWElement.container),this._htWElement.view.css({overflow:"hidden",zIndex:this.option("nZIndex")}),this._htWElement.base&&this._htWElement.base.css({position:"relavite"}),this._htWElement.container.css({left:"0px",top:"0px"}),this._createOffsetBugDummyTag()},_onActivate:function(){this._oTouch||(this._oTouch=new jindo.m.Touch(this._htWElement.view.$value(),{nMoveThreshold:0,nMomentumDuration:200,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0,bActivateOnload:!1})),this._attachEvent(),this._attachAniEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._detachAniEvent(),this._oTouch.deactivate(),this._oAnimation&&this._oAnimation.deactivate()
},_attachEvent:function(){this._htEvent={},this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),this.option("bAutoResize")&&(this._htEvent.resize=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.resize),jindo.m.bindPageshow(this._htEvent.resize))},_detachEvent:function(){this._oTouch.detachAll(),this.option("bAutoResize")&&(jindo.m.unbindRotate(this._htEvent.resize),jindo.m.unbindPageshow(this._htEvent.resize))},_getX:function(t){return t>=0?0:t<=this._htSize.maxX?this._htSize.maxX:t},_getY:function(t){return t>=0?0:t<=this._htSize.maxY?this._htSize.maxY:t},_attachAniEvent:function(){this._oAnimation&&(this._htEvent.endAni=jindo.$Fn(this._onEndAniImpl,this).bind(),this._oAnimation.attach({end:this._htEvent.endAni}))},_detachAniEvent:function(){this._oAnimation&&this._oAnimation.detachAll()},set:function(){var t=Array.prototype.slice.apply(arguments);return t.length>=1&&(this._oAnimation=t.shift(),this._oAnimation.setStyle(t),this._attachAniEvent()),this._oAnimation},getAnimation:function(){return this._oAnimation},isPlaying:function(){return this._oAnimation?this._oAnimation.isPlaying():!1},isAnimating:this.isPlaying,refresh:function(){this._refreshAnchor()},resize:function(){var t=this._htWElement.view,e=this._htWElement.container,n=parseInt(t.css("borderLeftWidth"),10),i=parseInt(t.css("borderRightWidth"),10),o=parseInt(t.css("borderTopWidth"),10),s=parseInt(t.css("borderBottomWidth"),10);n=isNaN(n)?0:n,i=isNaN(i)?0:i,o=isNaN(o)?0:o,s=isNaN(s)?0:s,this._htSize.viewWidth=t.width()-n-i,this._htSize.viewHeight=t.height()-o-s,this._htSize.contWidth=e.width(),this._htSize.contHeight=e.height()},_refreshAnchor:function(){this._htClickBug.hasBug&&(this._htClickBug.isBlocked=!1,this._htClickBug.anchors=jindo.$$("A",this._htWElement.view.$value()),this._htClickBug.anchors||(this._htClickBug.hasBug=!1))},_calcMomentum:function(t,e,n,i,o,s){var h=this.option("nDeceleration"),a=n/h,r=0,l=0;return t>0&&a>i?(l=s/(6/(a/e*h)),i+=l,e=e*i/a,a=i):0>t&&a>o&&(l=s/(6/(a/e*h)),o+=l,e=e*o/a,a=o),a*=0>t?-1:1,r=e/h,{nDist:a,nTime:Math.round(r)}},_clearAnchor:function(){if(this._htClickBug.hasBug&&!this._htClickBug.isBlocked){for(var t=null,e=null,n=0,i=this._htClickBug.anchors.length;i>n;n++)e=this._htClickBug.anchors[n],e.___isClear___||(this._htClickBug.dummyFnc!==e.onclick&&(e._onclick=e.onclick),e.onclick=this._htClickBug.dummyFnc,e.___isClear___=!0,t=e.___listeners___||[],jindo.$A(t).forEach(function(t){___Old__removeEventListener___.call(e,"click",t.listener,t.useCapture)}));this._htClickBug.isBlocked=!0}},_restoreAnchor:function(){if(this._htClickBug.hasBug&&this._htClickBug.isBlocked){for(var t=null,e=null,n=0,i=this._htClickBug.anchors.length;i>n;n++)e=this._htClickBug.anchors[n],e.___isClear___&&(e.onclick=this._htClickBug.dummyFnc!==e._onclick?e._onclick:null,e.___isClear___=null,t=e.___listeners___||[],jindo.$A(t).forEach(function(t){___Old__addEventListener___.call(e,"click",t.listener,t.useCapture)}));this._htClickBug.isBlocked=!1}},_onStart:function(t){return this.isPlaying()?void t.oEvent.stop():(this._clearOffsetBug(),this._clearAnchor(),void(this.fireEvent("beforeTouchStart",t)?(this._isStop=!1,this._startImpl(t),this.fireEvent("touchStart",jindo.$Jindo.mixin(t,{}))||t.stop()):t.stop()))},_onMove:function(t){if(this._clearOffsetBug(),this.fireEvent("beforeTouchMove",t)){var e=this._preventSystemEvent(t);e&&!this.isPlaying()&&this._moveImpl(t),e||this.fireEvent("scroll");var n=jindo.$Jindo.mixin(t,{});n.bPreventDefaultEvent=e,this.fireEvent("touchMove",n)||t.stop()}else t.stop()},_onEnd:function(t){this.isPlaying()||(this._isStop||this._clearOffsetBug(),this.fireEvent("beforeTouchEnd",t)?(t.sMoveType===jindo.m.MOVETYPE[3]||t.sMoveType===jindo.m.MOVETYPE[4]||t.sMoveType===jindo.m.MOVETYPE[5]?this._isStop?t.oEvent.stop(jindo.$Event.CANCEL_ALL):(this._restoreAnchor(),this._tapImpl&&this._tapImpl()):(this._endImpl(t),this._htClickBug.hasBug&&t.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)),this.fireEvent("touchEnd",jindo.$Jindo.mixin(t,{}))||t.stop()):t.stop())},_preventSystemEvent:function(t){var e=t.oEvent;return t.sMoveType===jindo.m.MOVETYPE[0]?this._bUseH?(e.stop(),!0):!1:t.sMoveType===jindo.m.MOVETYPE[1]?this._bUseV?(e.stop(),!0):!1:t.sMoveType===jindo.m.MOVETYPE[2]?this._bUseDiagonalTouch?(e.stop(),!0):!1:t.sMoveType===jindo.m.MOVETYPE[6]||t.sMoveType===jindo.m.MOVETYPE[7]||t.sMoveType===jindo.m.MOVETYPE[8]?(e.stop(),!0):(e.stop(),!0)},_onResize:function(t){this._resizeImpl(t),"rotate"===t.sType&&this.fireEvent("rotate",{isVertical:t.isVertical})},_getMomentumData:function(t,e,n){var i={nDist:0,nTime:0},o={nDist:0,nTime:0},s={momentumX:t.nMomentumX,momentumY:t.nMomentumY,distanceX:t.nDistanceX,distanceY:t.nDistanceY,x:this._nX,y:this._nY,nextX:this._nX,nextY:this._nY};return this.option("bUseMomentum")&&(t.nMomentumX&&t.nMomentumX>e||t.nMomentumY&&t.nMomentumY>e)?(this._bUseH&&(i=this._calcMomentum(t.nDistanceX,t.nSpeedX,t.nMomentumX,-this._nX,-this._htSize.maxX+this._nX,n?this._htSize.viewWidth:0)),this._bUseV&&(o=this._calcMomentum(t.nDistanceY,t.nSpeedY,t.nMomentumY,-this._nY,-this._htSize.maxY+this._nY,n?this._htSize.viewHeight:0)),s.nextX=this._nX+i.nDist,s.nextY=this._nY+o.nDist,s.duration=Math.max(Math.max(i.nTime,o.nTime),10),s.duration=jindo.m.getOsInfo().android?.7*s.duration:s.duration):s.duration=0,s},_makeStylePos:function(t){var e=this.getAnimation(),n=jindo.m.getTranslateOffset(t),i=jindo.m.getStyleOffset(t),o={top:n.top+i.top+"px",left:n.left+i.left+"px"};o[e.p("Transform")]=e.getTranslate("0px","0px"),t.css(o),this._htOffsetBug.elDummyTag.focus()},_createOffsetBugDummyTag:function(){this._hasOffsetBug()&&(this._htOffsetBug.elDummyTag=jindo.$$.getSingle("._offsetbug_dummy_atag_",this._htWElement.view.$value()),this._htOffsetBug.elDummyTag||(this._htOffsetBug.elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_offsetbug_dummy_atag_'></a>"),this._htWElement.view.append(this._htOffsetBug.elDummyTag)))},_clearOffsetBug:function(){this._hasOffsetBug()&&(clearTimeout(this._htOffsetBug.timer),this._htOffsetBug.timer=-1)},_fixOffsetBugImpl:function(){if(this._hasOffsetBug()){var t=this,e=this.getAnimation().getTarget(!0);this._clearOffsetBug(),this._htOffsetBug.timer=setTimeout(function(){e&&t._makeStylePos(e)},200)}},_hasOffsetBug:function(){return this._htOffsetBug.hasBug},destroy:function(){var t;this.deactivate();for(t in this._htWElement)this._htWElement[t]=null;this._htWElement=null;for(t in this._htEvent)this._htEvent[t]=null;this._htEvent=null,this._oTouch&&this._oTouch.destroy(),this._oAnimation&&this._oAnimation.destroy()}}).extend(jindo.m.UIComponent),jindo.m.Flick=jindo.$Class({$init:function(){this.option({bHorizontal:!0,sClassPrefix:"flick-",sContentClass:"ct",bUseCircular:!1,nTotalContents:3,nFlickThreshold:40,nDuration:100,nBounceDuration:100,fpPanelEffect:jindo.m.Effect.cubicEaseIn,nDefaultIndex:0,nDeceleration:.001,bUseMomentum:!1})},_initVar:function(){jindo.m.SwipeCommon.prototype._initVar.apply(this),this._bUseH=this.option("bHorizontal"),this._bUseV=!this._bUseH,this._bUseCircular=this.option("bUseCircular"),this._nContentIndex=0,this._welElement=null,this._aPos=[],this._nRange=null,this._nDefaultPanel=3,this._sHighlightClass="_jmc_no_tap_highlight_",this._hasHighlightBug=jindo.m.getBrowserInfo().chrome&&!jindo.m.getBrowserInfo().bSBrowser,this._nHightlightBug=-1},_setWrapperElement:function(t){jindo.m.SwipeCommon.prototype._setWrapperElement.call(this,t);var e=this.option("bHorizontal")?"height":"width";this._htWElement.aPanel=this._htWElement.container.queryAll("."+this.option("sClassPrefix")+this.option("sContentClass"));var n=jindo.$A(this._htWElement.aPanel);this._bUseCircular||(n=n.filter(function(t){return jindo.$Element(t).visible()})),this._htWElement.container.css({position:"relative",height:this._htWElement.view.height()+"px",width:"100%"}),this._htWElement.aPanel=n.forEach(function(t,n,i){i[n]=jindo.$Element(t).css(e,"100%")}).$value()},_checkIndex:function(t){var e=!0,n=this.getTotalContents()-1;return(isNaN(1*t)||0>t)&&(e=!1),t>n&&(e=!1),e},_refreshPanelInfo:function(){var t=0;this._aPos=[0];for(var e=0;e<this.option("nTotalContents");e++)t-=this._nRange,this._aPos.push(t)},_onActivate:function(){jindo.m.SwipeCommon.prototype._onActivate.apply(this)},_onDeactivate:function(){jindo.m.SwipeCommon.prototype._onDeactivate.apply(this)},set:function(){if(!this._oAnimation){jindo.m.SwipeCommon.prototype.set.apply(this,Array.prototype.slice.apply(arguments)),this._bUseCircular?this.option("nTotalContents",parseInt(this.option("nTotalContents"),10)):this.option("nTotalContents",this._htWElement.aPanel.length);var t=this.option("nDefaultIndex");this._checkIndex(t)||(t=0),this.resize(),this.refresh(t)}return this._oAnimation},refresh:function(t,e,n){jindo.m.SwipeCommon.prototype.refresh.call(this),t="undefined"==typeof t?this.getContentIndex():t,this._makeHighlightStyle(),this._moveTo(t,0,e,n,!0)},resize:function(){jindo.m.SwipeCommon.prototype.resize.call(this),this._nRange=this._bUseH?this._htSize.viewWidth:this._htSize.viewHeight,this._refreshPanelInfo(),this._bUseH?(this._htSize.maxX=(this.option("nTotalContents")-1)*-this._htSize.viewWidth,this._nX=this._aPos[this.getContentIndex()]):(this._htSize.maxY=(this.option("nTotalContents")-1)*-this._htSize.viewHeight,this._nY=this._aPos[this.getContentIndex()])},getElement:function(){if(this._welElement)return this._welElement;var t=this.getContentIndex();return this._bUseCircular&&(t%=this._nDefaultPanel),this._htWElement.aPanel[t]},getNextElement:function(){var t;return this._bUseCircular?(t=this._getIndexByElement(this.getElement()),t=((t+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:t+1)%this._nDefaultPanel):t=this.getNextIndex(),this._htWElement.aPanel[t]},getPrevElement:function(){var t;return this._bUseCircular?(t=this._getIndexByElement(this.getElement()),t=0>t-1?this._nDefaultPanel-1:t-1):t=this.getPrevIndex(),this._htWElement.aPanel[t]},_getIndexByElement:function(t){var e=-1;return jindo.$A(this._htWElement.aPanel).forEach(function(n,i){n.isEqual(t)&&(e=i)}),e},getContentIndex:function(){return parseInt(this._nContentIndex,10)},getNextIndex:function(){var t=this.getContentIndex()+1,e=this.getTotalContents()-1;return this._bUseCircular&&t>e&&(t=0),Math.min(e,t)},getPrevIndex:function(){var t=this.getContentIndex()-1;return this._bUseCircular&&0>t&&(t=this.getTotalContents()-1),Math.max(0,t)},getTotalContents:function(){return this.option("nTotalContents")},setTotalContents:function(t){isNaN(t)||1>t||(t=parseInt(t,10),this.getContentIndex()+1>t&&this._moveTo(t-1,0,!0,!0),this.option("nTotalContents",t),this.resize())},getTotalPanels:function(){return this._htWElement.aPanel.length},getPanels:function(){return this._htWElement.aPanel},moveTo:function(t,e){return t!=this.getContentIndex()?this._moveTo(t,e):void 0},_moveTo:function(t,e,n,i,o){var s=this.getTotalContents();if(!(this.isPlaying()||isNaN(t)||0>t||t>=s)){e="undefined"==typeof e?this.option("nDuration"):e,n="undefined"==typeof n?!0:n,i="undefined"==typeof i?!1:i;var h=this._bUseH?this._nX:this._nY,a=this._aPos[t];if(h!=a)this._bUseCircular&&(h>=0&&t==s-1?a=this._nRange:h<=(this._bUseH?this._htSize.maxX:this._htSize.maxY)&&0==t&&(a=this._aPos[s])),this._move(h,a,{duration:e,contentsNextIndex:t,fireEvent:n,fireMoveEvent:i,corrupt:o});else if(0===e&&n)if(i)this._fireMoveEvent(t)&&this._fireMoveEvent();else{var r={next:null,moveCount:0,corrupt:"undefined"==typeof o?!0:o,contentsNextIndex:t};this._fireFlickingEvent("beforeFlicking",r)&&(this._fireFlickingEvent("flicking",r),this._fireFlickingEvent("afterFlicking",r))}}},moveNext:function(t){this._bUseCircular&&this.option("nTotalContents")<3&&(this._bUseH?this._nX--:this._nY--),this._moveTo(this.getNextIndex(),t)},movePrev:function(t){this._bUseCircular&&this.option("nTotalContents")<3&&(this._bUseH?this._nX++:this._nY++),this._moveTo(this.getPrevIndex(),t)},_startImpl:function(){this.isPlaying()||(this._nPosToIndex=this._posToIndex(this._bUseH?this._nX:this._nY))},_moveImpl:function(t){var e=this._bUseH?t.nVectorX:t.nVectorY,n=this._bUseH?t.nDistanceX:t.nDistanceY,i=0>n,o=this._bUseH?this._nX:this._nY,s=i?this.getNextIndex():this.getPrevIndex();return o+=this._bUseCircular?e:s==this.getContentIndex()?e/2:e,this._nX=this._bUseH?o:0,this._nY=this._bUseV?o:0,t.bNext=i,this._moveAfterCall&&this._moveAfterCall(t),i},_endImpl:function(t){var e=null,n=(this._bUseH?t.nDistanceX:t.nDistanceY)<0,i=this.getContentIndex(),o=n?this.getNextIndex():this.getPrevIndex(),s=this._aPos[i],h=Math.abs((this._bUseH?this._nX:this._nY)-s),a=i===o||h<parseInt(this.option("nFlickThreshold"),10);if(0!=h){var r=this._nRange-1;if(this._bUseH?this._nX=s+(n?-r:r):this._nY=s+(n?-r:r),a)this._restore();else if(e=this._getMomentumData(t,1.5),0===e.duration||n&&i===this.getTotalContents()-1||!n&&0===i)this._moveTo(o,this.option("nDuration"));else{var l=this._posToIndex(this._bUseH?e.nextX:e.nextY);l==i?this._restore():this._moveTo(l,e.duration)}}},_resizeImpl:function(){this.resize()},_restore:function(){if(this._bUseH||this._bUseV){var t=this._aPos[this.getContentIndex()],e=this._bUseH?this._nX:this._nY;t!==e&&this._move(e,t,{duration:this.option("nBounceDuration"),restore:!0})}},_getRevisionNo:function(t){var e=this.getTotalContents();return 0>t?t+=e:t>e-1&&(t%=e),t},_fireCustomBeforeEvent:function(t){if(t.restore){if(!this._fireRestoreEvent("beforeRestore",t))return!1}else if(t.fireMoveEvent){if(0==t.moveIndex&&!this._fireMoveEvent(t.contentsNextIndex))return!1}else if(!this._fireFlickingEvent("beforeFlicking",t))return this._restore(),!1;return!0},_setPanelEndInfo:function(t){t.restore?(this._nX=this._bUseH?t.no*-this._nRange:0,this._nY=this._bUseV?t.no*-this._nRange:0):(t.no=this._getRevisionNo(t.no),this._updateFlickInfo(t.no,t.next?this.getNextElement():this.getPrevElement()))},_fireCustomEvent:function(t){t.restore?this._fireRestoreEvent("restore",t):t.fireMoveEvent?(0===t.duration||t.moveCount==t.moveIndex+1)&&this._fireMoveEvent():(this._fireFlickingEvent("flicking",t),this._fireFlickingEvent("afterFlicking",t))},_fireFlickingEvent:function(t,e){var n={nContentsIndex:this.getContentIndex(),bNext:e.next};return/before/.test(t)&&(n.nContentsNextIndex=0===e.duration&&e.moveCount>1?e.contentsNextIndex:e.next?this.getNextIndex():this.getPrevIndex()),n.nMoveCount=e.moveCount,n.bCorrupt=e.corrupt,n[this._bUseH?"bLeft":"bTop"]=n.bNext,this.fireEvent(t,n)},_fireRestoreEvent:function(t){return this.fireEvent(t,{nContentsIndex:this.getContentIndex()})},_fireMoveEvent:function(t){return"undefined"==typeof t?this.fireEvent("move",{nContentsIndex:this.getContentIndex()}):this.fireEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:t})},_updateFlickInfo:function(t,e){this._nContentIndex="undefined"==typeof t?this.getContentIndex():t,e="undefined"==typeof e?this.getElement():e,this._nX=this._bUseH?this._nContentIndex*-this._nRange:0,this._nY=this._bUseV?this._nContentIndex*-this._nRange:0,this._welElement=e},_onEndAniImpl:function(){this._bUseCircular&&this._refreshAnchor()},_makeOption:function(t){var e=jindo.$Jindo.mixin({duration:0,restore:!1,fireEvent:!0,fireMoveEvent:!1,moveCount:1,moveIndex:0,corrupt:!1,useCircular:this._bUseCircular,range:this._nRange},t||{});return e.restore&&(e.moveCount=0),e.moveCount>1&&0===e.duration&&(e.corrupt=!0),e.corrupt="undefined"==typeof t.corrupt?e.corrupt:t.corrupt,e},_moveWithEvent:function(t,e,n){var i=this,o={};return n.no=this._posToIndex(t),o=jindo.$Jindo.mixin(n,{}),!o.fireMoveEvent&&o.moveCount>1&&(o.contentsNextIndex=o.no),i._panelEndBeforeCall&&i._panelEndBeforeCall(o),this._oAnimation._oMorph.pushCall(function(){o.fireEvent&&!i._fireCustomBeforeEvent(o)&&(this.clear(),i._restore())}),this._oAnimation.move(this._bUseH?t:0,this._bUseV?t:0,e,o),this._oAnimation._oMorph.pushCall(function(){i._setPanelEndInfo(o),i._panelEndAfterCall&&i._panelEndAfterCall(o),o.fireEvent&&i._fireCustomEvent(o)}),this._oAnimation._oMorph},_move:function(t,e,n){if(t!==e){this._clearOffsetBug();var i=t>e,o=this._getStepCount(t,e);if(n=n||{},n.moveCount=o,n.next=i,n=this._makeOption(n),n.restore&&(o=1),0==n.duration)this._moveWithEvent(e,0,n).play();else{for(var s=0,h=t,a=0,r=this.option("fpPanelEffect")(n.duration),l=0;o>l;l++)n.moveIndex=l,a=this._getPanelEndPos(h,i),s=r((l+1)/o)-r(l/o),this._moveWithEvent(a,s,n),h=a;this._oAnimation._oMorph.play()}}},_getStepCount:function(t,e){var n=t>0&&!this._bUseCircular?!1:t>e,i=this._getStartIndex(t,n),o=this._posToIndex(e),s=(o*-this._nRange,Math.abs(o-i)),h=i;return t%this._nRange===0&&(h+=n?0:-1,n||s--),h*=-this._nRange,s},_posToIndex:function(t){return Math.floor(-t/this._nRange)},_getStartIndex:function(t,e){var n=this._posToIndex(t);return n+=e?0:1},_getPanelEndPos:function(t,e){var n=0,i=this._getStartIndex(t,e),o=t%this._nRange===0;return n=o?t+(e?-this._nRange:this._nRange):(e?i+1:i-1)*-this._nRange},_getTranslate:function(t){return this._oAnimation.getTranslate(this._bUseH?t:0,this._bUseV?t:0)},_makeHighlightStyle:function(){if(this._hasHighlightBug){var t=jindo.$("_jmc_no_tap_highlight_tag_");if(!t){t=document.createElement("style");var e=document.getElementsByTagName("html")[0];t.type="text/css",t.id="_jmc_no_tap_highlight_tag_",e.insertBefore(t,e.firstChild);var n=t.sheet||t.styleSheet;n.insertRule("."+this._sHighlightClass+" { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0),n.insertRule("."+this._sHighlightClass+" * { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0)}this._htWElement.container.addClass(this._sHighlightClass)}},_tapImpl:function(){if(this._hasHighlightBug){this._htWElement.container.removeClass(this._sHighlightClass);var t=this;clearTimeout(this._nHightlightBug),this._nHightlightBug=setTimeout(function(){t._htWElement.container.addClass(t._sHighlightClass)},200)}},destroy:function(){jindo.m.SwipeCommon.prototype.destroy.apply(this)}}).extend(jindo.m.SwipeCommon),jindo.m.CubeFlicking=jindo.$Class({$init:function(t,e){this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){jindo.m.Flick.prototype._initVar.apply(this),this._sCssPrefix=jindo.m.getCssPrefix()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this),this._setHalfWidth(),this._sRotate=this._bUseH?"Y":"X";var t=this;this.set(new jindo.m.Cube(this._getAnimationOption()).attach({set:function(){t._setStyle()}}),this._htWElement,this._nHalpSize)},_setHalfWidth:function(){this._nHalpSize=parseInt(this._htWElement.view.css(this._bUseH?"width":"height"),10)/2},_setStyle:function(t){function e(e){n={},n.position="absolute",n["float"]="left",n[i._oAnimation.p("BackfaceVisibility")]="hidden";var o=0;o=-o+90*e*(i._bUseH?1:-1),!i._bUseCircular&&(t-1>e||e>t+1)?n.display="none":(n.display="block",n[i._oAnimation.p("Transform")]="rotate"+i._sRotate+"("+o+"deg) translateZ("+i._nHalpSize+"px) ")}var n=null,i=(this._bUseH?"width":"height",this);t=t||this.option("nDefaultIndex")||0,jindo.$A(this._htWElement.aPanel).forEach(function(t,i){e(i),t.css(n)})},refresh:function(t){jindo.m.Flick.prototype.refresh.call(this,t),this._bUseCircular&&this._restorePanel()},resize:function(){jindo.m.Flick.prototype.resize.call(this),this._sRotate=this._bUseH?"Y":"X",this._setHalfWidth();var t=this._bUseH?"width":"height",e=this._htWElement.view[t](),n={},i={};this._bUseCircular||(this._updateFlickInfo(),this._oAnimation.move(this._nX,this._nY,0,this._makeOption({nHalpSize:this._nHalpSize}))),i[t]=e+"px",n[t]=e+"px",this._htWElement.container.css(i);var o=this;jindo.$A(this._htWElement.aPanel).forEach(function(n,i){n.css(t,e+"px"),n.css(o._oAnimation.p("Transform"),"rotate"+o._sRotate+"("+90*i*(o._bUseH?1:-1)+"deg) translateZ("+o._nHalpSize+"px) ")}),this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(t){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:t.bNext,nDis:(this._bUseH?this._nX:this._nY)-this._aPos[this.getContentIndex()],nHalpSize:this._nHalpSize,no:this.getContentIndex()}))},_moveWithEvent:function(t,e,n){return n.nHalpSize=this._nHalpSize,jindo.m.Flick.prototype._moveWithEvent.call(this,t,e,n)},_restorePanel:function(t,e){function n(t,e){_._htWElement.aPanel[t].css(r,l+"("+e+"deg) translateZ("+f+"px)")}t=t||this.getElement();var i=this._getIndexByElement(t),o=(this._bUseH?"left":"top",(0>i-1?this._nDefaultPanel-1:i-1)%this._nDefaultPanel),s=((i+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:i+1)%this._nDefaultPanel,h=i%this._nDefaultPanel,a=this.getContentIndex(),r=this._oAnimation.p("Transform"),l="rotate"+this._sRotate,c=90*(this._bUseH?1:-1),f=this._nHalpSize,_=this;this._bUseCircular&&(0==a||"undefined"==typeof e||a==this.option("nTotalContents")-1&&!e?(this._htWElement.container.css(this._oAnimation.p("TransitionDuration"),"").css(r,"translateZ(-"+f+"px) "+l+"("+a*-c+"deg) "),n(o,(a-1)*c),n(h,a*c),n(s,(a+1)*c)):e?n(s,(a+1)*c):n(o,(a-1)*c))},_panelEndAfterCall:function(t){this._bUseCircular?this._restorePanel("",t.next):this._setStyle(t.no)},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.PreviewFlicking=jindo.$Class({$init:function(t,e){this.option({nTotalContents:5}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){jindo.m.Flick.prototype._initVar.apply(this),this._nDefaultPanel=5},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var t=this;this.set(new jindo.m.Slide(this._getAnimationOption()).attach({set:function(e){t._setStyle(e.css)}}),this._htWElement.container)},_setStyle:function(t){{var e={},n=this._bUseH?"width":"height";this._bUseH?"left":"top"}for(var i in t)e[i]=t[i];if(e.position="relative",this._bUseCircular&&(t.position="absolute"),this._bUseH)e.clear="both",t["float"]="left",this._htWElement.base.css("margin","0 auto");else{var o=this._htWElement.view.height(),s=(o-this._htWElement.aPanel[0].height())/2;this._htWElement.base.css("marginTop",s+"px")}if(this.option("nMinWidth")){var h=n.charAt(0).toUpperCase()+n.substr(1);this._htWElement.base.css("min"+h,this.option("nMinWidth").replace(/\D/gi,"")+"px")}this._htWElement.base.css({position:"relative"}),this._htWElement.base.css(n,"50%"),this._htWElement.container.css(e);var a=this;jindo.$A(this._htWElement.aPanel).forEach(function(e){var i=e;a._bUseCircular&&i.css("position","absolute"),this._bUseH?t[n]=100/a._htWElement.aPanel.length+"%":t.width="100%",i.css(t)},this)},_setWrapperElement:function(t){jindo.m.SwipeCommon.prototype._setWrapperElement.call(this,t);this.option("bHorizontal")?"height":"width";this._htWElement.aPanel=this._htWElement.container.queryAll("."+this.option("sClassPrefix")+this.option("sContentClass"));for(var e in this._htWElement.aPanel)this._htWElement.aPanel[e]=jindo.$Element(this._htWElement.aPanel[e]);this._htWElement.container.css({left:"",top:""})},resize:function(){jindo.m.SwipeCommon.prototype.resize.call(this),this._restorePanel();{var t=this._bUseH?"width":"height";this._htWElement.view[t]()}this._htWElement.container.css(t,100*this._htWElement.aPanel.length+"%"),this._nRange=this._bUseH?this._htWElement.aPanel[0].width():this._htWElement.aPanel[0].height(),this._refreshPanelInfo(),this._bUseH?(this._htSize.maxX=(this._nTotalContents-1)*-this._nRange,this._nX=this._aPos[this.getContentIndex()]):(this._htSize.maxY=(this._nTotalContents-1)*-this._nRange,this._nY=this._aPos[this.getContentIndex()]),this._updateFlickInfo(),this._bUseCircular||this._oAnimation.move(this._nX,this._nY)},_restorePanel:function(t){t=t||this.getElement();var e=this.getTotalPanels(),n=this._bUseH?"left":"top",i=this._getIndexByElement(t);this._htWElement.container.css(this._oAnimation.p("Transform"),this._getTranslate(0));for(var o=0,s=Math.floor(e/2),h=0;e>h;h++)o=h-i,this._bUseCircular&&(o>s?o-=e:-s>o&&(o+=e)),this._htWElement.aPanel[h].css(n,20*o+"%"),0==o?this._htWElement.aPanel[h].css("zIndex",10):this._htWElement.aPanel[h].css("zIndex",1)},_getPosValue:function(t){return this._hasOffsetBug()?t:this._getTranslate(t)},_panelEndAfterCall:function(){this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(t){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:t.bNext,startIndex:this._nPosToIndex}))},getIndexByElement:function(t){for(var e=-1,n=0,i=this._htWElement.aPanel.length;i>n;n++)if(this._htWElement.aPanel[n].$value()===t){e=n;break}return e},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.SlideFlicking=jindo.$Class({$init:function(t,e){this.option(e||{}),this._initVar(),this._oDocFragment=document.createDocumentFragment(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var t=this;this.set(new jindo.m.Slide(this._getAnimationOption()).attach({set:function(e){t._setStyle(e.css)}}),this._htWElement.container)},_setStyle:function(t){var e={},n=0,i=this._bUseH?"width":"height",o=this._bUseH?"left":"top";jindo.$Jindo.mixin(e,t),this._bUseCircular&&(e[i]="100%",e[o]="-100%",t.position="absolute",t[i]="100%",t.left=0,t.top=0),this._bUseH&&(e.clear="both",t["float"]="left"),this._htWElement.container.css(e),jindo.$A(this._htWElement.aPanel).forEach(function(e,i){n=(i+1)%this._nDefaultPanel*100+"%",this._bUseCircular&&(this._hasOffsetBug()?t[o]=n:t[this._oAnimation.p("Transform")]=this._getTranslate(n)),e.css(t)},this)},resize:function(){jindo.m.Flick.prototype.resize.call(this);var t=this._bUseH?"width":"height",e=this._htWElement.view[t]();this._bUseCircular||(this._htWElement.container.css(t,this._htWElement.aPanel.length*e+"px"),jindo.$A(this._htWElement.aPanel).forEach(function(n){n.css(t,e+"px")}),this._updateFlickInfo(),this._oAnimation.move(this._nX,this._nY))},_restorePanel:function(t){t=t||this.getElement();var e=this._getIndexByElement(t),n=this._hasOffsetBug()?this._bUseH?"left":"top":this._oAnimation.p("Transform"),i=(0>e-1?this._nDefaultPanel-1:e-1)%this._nDefaultPanel,o=((e+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:e+1)%this._nDefaultPanel,s=e%this._nDefaultPanel;this._welElement=this._htWElement.aPanel[s],this._htWElement.container.css(this._oAnimation.p("Transform"),this._getTranslate(0)),this._welElement.css(n,this._getPosValue("100%")).css("zIndex",10),this._htWElement.aPanel[i].css(n,this._getPosValue("0%")).css("zIndex",1),this._htWElement.aPanel[o].css(n,this._getPosValue("200%")).css("zIndex",1),jindo.m.getOsInfo().ios&&this._bUseCircular&&(this._oDocFragment.appendChild(this._htWElement.aPanel[i].$value()),this._oDocFragment.appendChild(this._htWElement.aPanel[o].$value()),this._htWElement.container.$value().appendChild(this._oDocFragment))},_getPosValue:function(t){return this._hasOffsetBug()?t:this._getTranslate(t)},_panelEndAfterCall:function(){this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(t){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:t.bNext}))},_onEndAniImpl:function(){jindo.m.Flick.prototype._onEndAniImpl.apply(this),this._bUseCircular||this._fixOffsetBugImpl()},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.Flicking=jindo.$Class({$init:function(t,e){this.option({bHorizontal:!0,nDefaultIndex:0,sClassPrefix:"flick-",sContentClass:"ct",nDuration:100,nFlickThreshold:40,bUseCircular:!1,sAnimation:"slide",nFlickDistanceOffset:null,bAutoResize:!0,nBounceDuration:100,bSetNextPanelPos:!1,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),bUseTranslate:!0,bActivateOnload:!0,bUseDiagonalTouch:!1,nDefaultScale:.94,nZIndex:2e3}),this.option(e||{}),this._initVar(t),this.option("bActivateOnload")&&this.activate()},$static:{_htAnimation:{flip:"_FlipFlicking_","circular-flip":"_FlipFlicking_",alignFlip:"_AlignFlipFlicking_","circular-alignFlip":"_AlignFlipFlicking_","circular-slide":"SlideFlicking",slide:"SlideFlicking","circular-cover":"CoverFlicking",cover:"CoverFlicking"}},_initVar:function(t){this._el=jindo.$(t),this._oFlickingImpl=null,this._isSwipeType=/slide|cover/.test(this.option("sAnimation"))?!0:!1},_createFlicking:function(){var t=this.option("sAnimation");this.option("bUseCircular")&&(t="circular-"+t);try{var e=this.option();e.bActivateOnload=!1,this._oFlickingImpl=new jindo.m[jindo.m.Flicking._htAnimation[t]](this._el,e)}catch(n){console.error("_createFlicking ERROR ! "+n)}},refresh:function(t,e,n){this._oFlickingImpl&&(this._isSwipeType?this._oFlickingImpl.refresh(t,n,!0):this._oFlickingImpl.refresh(t,e,n))},getIndexByElement:function(t){return this._oFlickingImpl?this._isSwipeType?this._oFlickingImpl._getIndexByElement(t):this._oFlickingImpl.getIndexByElement(t):-1},getElement:function(){return this._oFlickingImpl?this._oFlickingImpl.getElement():null},getContentElement:function(){return this.getElement()},getContentIndex:function(){return this._oFlickingImpl?this._oFlickingImpl.getContentIndex():null},getNextElement:function(){return this._oFlickingImpl?this._oFlickingImpl.getNextElement():null},getPrevElement:function(){return this._oFlickingImpl?this._oFlickingImpl.getPrevElement():null},getTotalContents:function(){return this._oFlickingImpl?this._oFlickingImpl.getTotalContents():null},getTotalPanels:function(){return this._oFlickingImpl?this._oFlickingImpl.getTotalPanels():null},getPanels:function(){return this._oFlickingImpl?this._oFlickingImpl._htWElement.aPanel:null},getPrevIndex:function(){return this._oFlickingImpl?this._oFlickingImpl.getPrevIndex():null},getNextIndex:function(){return this._oFlickingImpl?this._oFlickingImpl.getNextIndex():null},moveNext:function(t){this.isActivating()&&this._oFlickingImpl&&this._oFlickingImpl.moveNext(t)},movePrev:function(t){this.isActivating()&&this._oFlickingImpl&&this._oFlickingImpl.movePrev(t)},moveTo:function(t,e,n){"undefined"!=typeof t&&t!=this.getContentIndex()&&(0>t||t>=this.getTotalContents()||this._oFlickingImpl&&(this._isSwipeType?this._oFlickingImpl._moveTo(t,e,n,!0):this._oFlickingImpl.moveTo(t,e,n)))},isAnimating:function(){return this._oFlickingImpl?this._isSwipeType?this._oFlickingImpl.isPlaying():this._oFlickingImpl._doFlicking:void 0},_onActivate:function(){this._oFlickingImpl||this._createFlicking(),this._oFlickingImpl&&!this._oFlickingImpl.isActivating()&&(this._oFlickingImpl.activate(),this._attachEvent(),this._isSwipeType||this.refresh(this.getContentIndex(),!0,!1))},_onDeactivate:function(){this._oFlickingImpl.deactivate(),this._detachEvent()},_attachEvent:function(){if(this._oFlickingImpl){var t=this;this._oFlickingImpl.attach({touchStart:function(e){t.fireEvent("touchStart",e)||e.stop()},touchMove:function(e){t.fireEvent("touchMove",e)},touchEnd:function(e){t.fireEvent("touchEnd",e)},beforeFlicking:function(e){t.fireEvent("beforeFlicking",e)||e.stop()},afterFlicking:function(e){t.fireEvent("afterFlicking",e)},beforeMove:function(e){t.fireEvent("beforeMove",e)||e.stop()},move:function(e){t.fireEvent("move",e)},scroll:function(){t.fireEvent("scroll")},beforeRestore:function(e){t.fireEvent("beforeRestore",e)||e.stop()},restore:function(e){t.fireEvent("restore",e)}})}},_detachEvent:function(){this._oFlickingImpl&&this._oFlickingImpl.detachAll()},destroy:function(){this.deactivate(),this._el=null,this._oFlickingImpl=null,this._isSwipeType=!1}}).extend(jindo.m.UIComponent),jindo.m._FlickingAnimation_=jindo.$Class({$init:function(t,e){this.option(e||{}),this._setWrapperElement(t),this._initVar(),this._initTouch(),this._createDummyTag(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oTouch=null,this._doFlicking=!1,this._bTouchStart=!1,this._bMove=!1;var t=this.option("nDefaultIndex")||0;this._checkIndex(t)||(t=0),this.option("bUseCircular")&&(t%=3),this._htIndexInfo={nContentIndex:t,nNextContentIndex:t,welElement:this._htWElement.aPanel[t],welNextElement:this._htWElement.aPanel[t],sDirection:null};
var e=jindo.m.getDeviceInfo();this._isIos=e.iphone||e.ipad,this._bAndroid=e.android&&!e.bChrome,this._nVersion=e.version,this._fnDummyFnc=function(){return!1},this._bClickBug=jindo.m.hasClickBug(),this._sCssPrefix=jindo.m.getCssPrefix(),this._elTransition=null,this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._bDummyTagException=this._bAndroid&&this._nVersion<"3"},_setWrapperElement:function(t){this._htWElement={};var e=jindo.$(t),n="."+this.option("sClassPrefix");this._htWElement.base=jindo.$Element(e).css("zIndex",this.option("nZIndex")),this._htWElement.container=jindo.$Element(jindo.$$.getSingle(n+"container",e));var i=jindo.$$(n+this.option("sContentClass"),e);this._htWElement.aPanel=jindo.$A(i).forEach(function(t,e,n){n[e]=jindo.$Element(t)}).$value()},_initFlicking:function(){this._setElementStyle(),this._setElementSize()},_setElementStyle:function(){},_setElementSize:function(){},_initTouch:function(){this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nSlopeThreshold:4,nMoveThreshold:0,nEndEventThreshold:jindo.m.getDeviceInfo().win?400:0,bActivateOnload:!1,bHorizental:this.option("bHorizontal"),bVertical:!1})},_createDummyTag:function(){if(this._bDummyTagException){this._htWElement.aDummyTag=[];for(var t=0,e=this._htWElement.aPanel.length;e>t;t++){var n=this._htWElement.aPanel[t],i=jindo.$$.getSingle("._cflick_dummy_atag_",n.$value());i||(i=jindo.$("<a href='javascript:void(0);' class='_cflick_dummy_atag_'></a>"),i.style.position="absolute",i.style.left="-1000px",i.style.top="-1000px",i.style.width=0,i.style.height=0,n.append(i)),this._htWElement.aDummyTag.push(i)}}},_focusFixedBug:function(){if(this._htWElement&&"undefined"!=typeof this._htWElement.aDummyTag)for(var t=0,e=this._htWElement.aDummyTag.length;e>t;t++)this._htWElement.aDummyTag[t].focus()},_onStart:function(t){if(!this._doFlicking){if(!this.fireEvent("touchStart",t))return void t.stop();this._bTouchStart=!0,this._clearAnchor(),this._onAfterStart()}},_onAfterStart:function(){},_onMove:function(t){var e=this.option("bHorizontal"),n=t.oEvent;if(t.sMoveType===jindo.m.MOVETYPE[0]){if(!e)return this.fireEvent("scroll"),void(this._bTouchStart=!1);n.stop(jindo.$Event.CANCEL_ALL)}else if(t.sMoveType===jindo.m.MOVETYPE[1]){if(e)return this.fireEvent("scroll"),void(this._bTouchStart=!1);n.stop(jindo.$Event.CANCEL_ALL)}else if(t.sMoveType===jindo.m.MOVETYPE[2]){if(!this.option("bUseDiagonalTouch"))return this.fireEvent("scroll"),void(this._bTouchStart=!1);n.stop(jindo.$Event.CANCEL_ALL)}if(!this._doFlicking&&this._bTouchStart){this.fireEvent("touchMove",t);var i=e?t.nDistanceX:t.nDistanceY,o=e?t.nVectorX:t.nVectorY,s=e?t.nX:t.nY;this._onAfterMove(i,o,s),this._bMove=!0}},_onAfterMove:function(){},_onEnd:function(t,e){if(!this._doFlicking&&this._bTouchStart){this._doFlicking=!0;var n=this.option("bHorizontal");this._bAndroid&&this._nVersion>="4.1"||(t.sMoveType===jindo.m.MOVETYPE[0]||t.sMoveType===jindo.m.MOVETYPE[1]||t.sMoveType===jindo.m.MOVETYPE[2])&&t.oEvent.stop(jindo.$Event.CANCEL_DEFAULT),(t.sMoveType===jindo.m.MOVETYPE[3]||t.sMoveType===jindo.m.MOVETYPE[4])&&this._restoreAnchor();var i=this.option("nDuration"),o=this._getSnap(t.nDistanceX,t.nDistanceY,i,t.sMoveType),s=n?t.nDistanceX:t.nDistanceY,h=n?t.nVectorX:t.nVectorY,a=n?t.nX:t.nY;null===o.sDirection&&(i=this.option("nBounceDuration"),(0===s||t.sMoveType===jindo.m.MOVETYPE[2]&&!this.option("bUseDiagonalTouch"))&&this._endAnimation(!1));var r={nContentsIndex:this.getContentIndex(),nContentsNextIndex:o.nContentIndex};if(null!==this._bFlickLeft&&(this.option("bHorizontal")?r.bLeft=this._bFlickLeft:r.bTop=this._bFlickLeft),null!==o.sDirection){if(!this.fireEvent("beforeFlicking",r))return void this.restorePosition()}else if(!this.fireEvent("beforeRestore",{nContentsIndex:this.getContentIndex()}))return;this._htIndexInfo.nNextContentIndex=o.nContentIndex,this._htIndexInfo.welNextElement=o.welElement,this._htIndexInfo.sDirection=o.sDirection,s=n?t.nDistanceX:t.nDistanceY,h=n?t.nVectorX:t.nVectorY,a=n?t.nX:t.nY,this._onAfterEnd(s,h,a,e),this.fireEvent("touchEnd",t)}},_onAfterEnd:function(){},_endAnimation:function(t){var e=this;"undefined"==typeof t&&(t=!0),this._doFlicking=!1,this._bTouchStart=!1,this._bMove=!1;var n=null==this._htIndexInfo.sDirection&&this._htIndexInfo.nContentIndex===this._htIndexInfo.nNextContentIndex?!0:!1;this._resetIndexInfo(this._htIndexInfo.nNextContentIndex,this._htIndexInfo.welNextElement),t&&this._fireCustomEvent("afterFlicking"),n&&this.fireEvent("restore",{nContentsIndex:this._htIndexInfo.nContentIndex}),this._restoreAnchor(),this._setAnchorElement(),setTimeout(function(){e._createDummyTag(),e._focusFixedBug()},5),this._bFlickLeft=null},_resetIndexInfo:function(t,e){this._htIndexInfo.nContentIndex=t,this._htIndexInfo.nNextContentIndex=t,"undefined"==typeof e&&(this.option("bUseCircular")&&(t%=3),e=this._htWElement.aPanel[t]),this._htIndexInfo.welElement=e,this._htIndexInfo.welNextElement=e,this._htIndexInfo.sDirection=null},_checkIndex:function(t){var e=!0;(isNaN(1*t)||0>t)&&(e=!1);var n=this.getTotalContents()-1;return t>n&&(e=!1),e},refresh:function(t,e,n){var i=this;"undefined"==typeof t&&(t=this.getContentIndex()),this._checkIndex(t)&&("undefined"==typeof e&&(e=!0),"undefined"==typeof n&&(n=!0),(!n||this._fireCustomEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:t}))&&(this._refresh(t,e),this._resetIndexInfo(t),n&&this._fireCustomEvent("move"),this._restoreAnchor(),this._setAnchorElement(),this._createDummyTag(),setTimeout(function(){i._focusFixedBug()},100)))},_refresh:function(){},moveTo:function(t,e,n){"undefined"!=typeof t&&t!=this.getContentIndex()&&(0>t||t>=this.getTotalContents()||("undefined"==typeof e&&(e=this.option("nDuration")),"undefined"==typeof n&&(n=!0),this._moveTo(t,e,n)))},_getSnap:function(t,e,n,i){var o=this.option("bHorizontal")?t:e,s=this._htIndexInfo.welElement,h=this.getContentIndex(),a=null;return(i!==jindo.m.MOVETYPE[2]||this.option("bUseDiagonalTouch"))&&this._bMove&&Math.abs(o)>=this.option("nFlickThreshold")&&(0>o?(s=this.getNextElement(),h=this.getNextIndex(),this._bFlickLeft=!0,a="next"):(s=this.getPrevElement(),h=this.getPrevIndex(),this._bFlickLeft=!1,a="prev")),this._htIndexInfo.welElement.$value()===s.$value()&&(a=null),{elElement:s.$value(),welElement:s,nContentIndex:h,sDirection:a}},_onResize:function(t){this.option("bAutoResize")&&this.refresh(this.getContentIndex(),!0,!1),this.fireEvent("rotate",{isVertical:t.isVertical})},_fireCustomEvent:function(t,e){return"undefined"==typeof e&&(e={nContentsIndex:this._htIndexInfo.nContentIndex},this._bFlickLeft&&(this.option("bHorizontal")?e.bLeft=this._bFlickLeft:e.bTop=this._bFlickLeft)),this.fireEvent(t,e)},restorePosition:function(){this._onAfterEnd()},movePrev:function(t){if(!this._doFlicking){var e=this.getPrevElement();e.$value()!==this.getElement().$value()&&("undefined"==typeof t&&(t=this.option("nDuration")),this._bTouchStart=!0,this._bMove=!0,this._movePrev(t))}},_movePrev:function(t){var e=this.option("nFlickThreshold");this._onEnd({nDistanceX:e+10,nDistanceY:e+10,nX:10,nY:10},t)},moveNext:function(t){if(!this._doFlicking){var e=this.getNextElement();e.$value()!==this.getElement().$value()&&("undefined"==typeof t&&(t=this.option("nDuration")),this._bTouchStart=!0,this._bMove=!0,this._moveNext(t))}},_moveNext:function(t){{var e=-1*this.option("nFlickThreshold");this.option("bHorizontal")?this._htWElement.base.width():this._htWElement.base.height()}this._onEnd({nDistanceX:e-10,nDistanceY:e-10,nX:10,nY:10},t)},_attachTransitionEnd:function(t,e){if(t!==this._elTransition){this._elTransition=t;var n=this;0===e?setTimeout(function(){n._onTransitionEnd()},10):jindo.m.attachTransitionEnd(t,this._wfTransitionEnd)}},_detachTarnsitonEnd:function(){this._elTransition&&(jindo.m.detachTransitionEnd(this._elTransition,this._wfTransitionEnd),this._elTransition=null)},getIndexByElement:function(t){for(var e=-1,n=0,i=this._htWElement.aPanel.length;i>n;n++)if(this._htWElement.aPanel[n].$value()===t){e=n;break}return e},getElement:function(){return this._htIndexInfo.welElement},getContentElement:function(){return this.getElement()},getContentIndex:function(){return this._htIndexInfo.nContentIndex},getNextElement:function(){var t=this.getNextIndex();return this.option("bUseCircular")&&(t=this.getIndexByElement(this.getElement().$value()),t=t+1>2?0:t+1),this._htWElement.aPanel[t]},getPrevElement:function(){var t=this.getPrevIndex();return this.option("bUseCircular")&&(t=this.getIndexByElement(this.getElement().$value()),t=0>t-1?2:t-1),this._htWElement.aPanel[t]},getTotalContents:function(){var t=this._htWElement.aPanel.length;return this.option("bUseCircular")&&(t="undefined"==typeof this.option("nTotalContents")?3:this.option("nTotalContents")),t},getTotalPanels:function(){return this.option("bUseCircular")?3:this.getTotalContents()},getPanels:function(){return this._htWElement.aPanel},getPrevIndex:function(){var t=this.getContentIndex()-1;return this.option("bUseCircular")&&0>t&&(t=this.getTotalContents()-1),t=Math.max(0,t)},getNextIndex:function(){var t=this.getContentIndex()+1,e=this.getTotalContents()-1;return this.option("bUseCircular")&&t>e&&(t=0),t=Math.min(e,t)},_onTransitionEnd:function(){},_setAnchorElement:function(){this._bClickBug&&(this._aAnchor=jindo.$$("A",this._htWElement.container.$value()))},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){for(var t=null,e=0,n=this._aAnchor.length;n>e;e++){this._fnDummyFnc!==this._aAnchor[e].onclick&&(this._aAnchor[e]._onclick=this._aAnchor[e].onclick),this._aAnchor[e].onclick=this._fnDummyFnc,t=this._aAnchor[e].___listeners___||[];for(var i=0,o=t.length;o>i;i++)___Old__removeEventListener___.call(this._aAnchor[e],"click",t[i].listener,t[i].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){for(var t=null,e=0,n=this._aAnchor.length;n>e;e++){this._aAnchor[e].onclick=this._fnDummyFnc!==this._aAnchor[e]._onclick?this._aAnchor[e]._onclick:null,t=this._aAnchor[e].___listeners___||[];for(var i=0,o=t.length;o>i;i++)___Old__addEventListener___.call(this._aAnchor[e],"click",t[i].listener,t[i].useCapture)}this._bBlocked=!1}},_onActivate:function(){this._attachEvent(),this._setAnchorElement(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._oTouch.attach("touchStart",this._htEvent.touchStart),this._oTouch.attach("touchMove",this._htEvent.touchMove),this._oTouch.attach("touchEnd",this._htEvent.touchEnd),this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),jindo.m.bindPageshow(this._htEvent.rotate)},_detachEvent:function(){this._oTouch.detachAll(),jindo.m.unbindRotate(this._htEvent.rotate),jindo.m.unbindPageshow(this._htEvent.rotate);for(var t in this._htEvent){var e=this._htEvent[t];"undefined"!=typeof e.ref&&e.ref.detach(e.el,t)}this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null,this._oTouch=null,this._o_FlickingAnimation_=null;for(var e in this._htIndexInfo)this._htIndexInfo[t]=null;this._isIos=null,this._bAndroid=null,this._nVersion=null,this._fnDummyFnc=null,this._doFlicking=null,this._bClickBug=null,this._b3dExecption=null,this._bDummyTagException=null}}).extend(jindo.m.UIComponent),jindo.m.AjaxHistory=jindo.$Class({bHashEvent:!1,bPushState:!1,_nIntervalId:0,_htLastState:{},$init:function(t){this.option({nCheckInterval:100,bUseHash:!1}),this.option(t||{})},initialize:function(){this._initVar(),this._attachEvent();var t=this._getHash();return t?(this._htLastState=this._getDecodedData(t),this.fireEvent("change",{bLoad:!0,htHistoryData:this._htLastState})):this.fireEvent("load"),this},_initVar:function(){var t=jindo.m.getDeviceInfo();this.bHashEvent="onhashchange"in window,this.bPushState="undefined"!=typeof window.history&&"undefined"!=typeof window.history.pushState&&"undefined"!=typeof window.history.replaceState&&!((t.iphone||t.ipad)&&parseFloat(t.version,10)<4.3),this._nIntervalId=0,this._oAgent=jindo.$Agent().navigator(),this._bAndroid=t.android,this.option("bUseHash")&&(this.bPushState=!1)},_attachEvent:function(){this._htEvent={},this.bPushState?this._htEvent.popstate={ref:jindo.$Fn(this._onPopState,this).attach(window,"popstate"),el:window}:this.bHashEvent?this._htEvent.hashchange={ref:jindo.$Fn(this._onHashChange,this).attach(window,"hashchange"),el:window}:(clearInterval(this._nIntervalId),this._nIntervalId=setInterval(jindo.$Fn(this._onHashChange,this).bind(),this.option("nCheckInterval")))},_onPopState:function(t){var e=t.$value().state;if(e){var n=this._cloneObject(e);this._compareData(n,this._htLastState)||(this._htLastState=n,this._onChange())}},_onHashChange:function(){var t=this._getDecodedData(this._getHash());this._compareData(t,this._htLastState)||(this._htLastState=t,this._onChange())},_onChange:function(){this.fireEvent("change",{bLoad:!1,htHistoryData:this._htLastState})},addHistory:function(t,e){if("undefined"==typeof e&&(e=!1),t&&"object"==typeof t&&jindo.$H(t).length()>0){var n=this._cloneObject(t);if(this._compareData(n,this._htLastState))return;this._htLastState=n;var i=this._getEncodedData(this._htLastState);if(this.bPushState)e?this._replaceState(this._htLastState):this._pushState(this._htLastState);else{var o=this;this._bAndroid?setTimeout(function(){o._setHash(i)},0):this._setHash(i)}}},_replaceState:function(t){history.replaceState(t,document.title,location.href)},_pushState:function(t){history.pushState(t,document.title,location.href)},_setHash:function(t){location.hash=t},_compareData:function(t,e){if(t&&e){if(jindo.$H(t).length()==jindo.$H(e).length()){for(var n in t)if("object"==typeof t[n]){if(!arguments.callee(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}return!1}return!1},_getEncodedData:function(t){return t?encodeURIComponent("object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify(t):jindo.$Json(t).toString()):""},_getDecodedData:function(t){try{if(t){var e=decodeURIComponent(t);return"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):jindo.$Json(e).toObject()}}catch(n){}return{}},_cloneObject:function(t){var e,n;return t?(e=jindo.$Json(t).toString(),n=jindo.$Json(e).toObject()):n={},n},_getHash:function(){return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1)},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t)}this._htEvent=null},destroy:function(){this._detachEvent(),clearInterval(this._nIntervalId),this._nIntervalId=null}}).extend(jindo.m.Component),jindo.m.LayerPosition=jindo.$Class({$init:function(t,e,n){arguments.length<3&&(!e||e&&!e.nodeType&&"string"!=typeof e)?(this._setBaseLayer(document.body),n=e||{},e=t):this._setBaseLayer(t),this.option({bActivateOnload:!0,bAutoReposition:!0,sPosition:"center",nLeftMargin:0,nRightMargin:0,nTopMargin:0,nBottomMargin:0,bUseFixed:!0}),this.option(n||{}),this._initVar(),this._setWrapperElement(e),this.option("bActivateOnload")&&this.activate()},isUseFixed:function(){return this._bUseFixedProperty},_onActivate:function(){this._isVertical=jindo.m.isVertical(),this.option("bAutoReposition")&&this._attachEvent(),this.setPosition()},_onDeactivate:function(){this.option("bAutoReposition")&&this._detachEvent()},_initVar:function(){var t=this.option("nLeftMargin"),e=this.option("nTopMargin");this._htMargin={nLeft:t,nRight:this.option("nRightMargin"),nTop:e,nBottom:this.option("nBottomMargin")},this._sPosition=this.option("sPosition"),this._htOldPosition={nTop:null,nLeft:null,nBottom:null},this._htPosition={nTop:null,nLeft:null,nBottom:null},this._bUseFixedProperty=this.option("bAutoReposition")&&this.option("bUseFixed")&&jindo.m._isUseFixed(),this._isVertical=null,this._hasOrientationChange=jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().bChrome,this._nPreWidth=-1},getPosition:function(){return this._sPosition},getMargin:function(){return this._htMargin},getLayer:function(){return this._htWElement.element.$value()},getCurrentPosition:function(){return this._htPosition},_setWrapperElement:function(t){this._htWElement={},this.setLayer(t)},setLayer:function(t){return this._htWElement.element=jindo.$Element(t),this._bUseFixedProperty?this._htWElement.element.css("position","fixed"):this._htWElement.element.css("position","absolute"),this._htWElement.element.parent().isEqual(document.body)||this._htWElement.element.appendTo(document.body),this},top:function(t){this.setPosition("top",t)},bottom:function(t){this.setPosition("bottom",t)},center:function(t){this.setPosition("center",t)},all:function(t){this.setPosition("all",t)},_fixedLayerSize:function(t,e){var n=parseInt(this._htMargin.nLeft,10),i=parseInt(this._htMargin.nTop,10),o={"padding-top":parseInt(this._htWElement.element.css("padding-top"),10),"padding-bottom":parseInt(this._htWElement.element.css("padding-bottom"),10),"padding-left":parseInt(this._htWElement.element.css("padding-left"),10),"padding-right":parseInt(this._htWElement.element.css("padding-right"),10)},s={"border-top-width":parseInt(this._htWElement.element.css("border-top-width"),10),"border-bottom-width":parseInt(this._htWElement.element.css("border-bottom-width"),10),"border-left-width":parseInt(this._htWElement.element.css("border-left-width"),10),"border-right-width":parseInt(this._htWElement.element.css("border-right-width"),10)};return t-=o["padding-left"]+o["padding-right"]+s["border-left-width"]+s["border-right-width"]+n+parseInt(this._htMargin.nRight,10),e-=o["padding-top"]+o["padding-bottom"]+s["border-top-width"]+s["border-bottom-width"]+i+parseInt(this._htMargin.nBottom,10),this._htWElement.element.css({width:t+"px",height:e+"px"}),{nTop:i,nLeft:n}},_setBaseLayer:function(t){return this._wel=this._el=jindo.$(t),this._el&&(this._wel=jindo.$Element(t)),this},getBaseLayer:function(){return this._el},_getPosition:function(){var t,e=this.getBaseLayer(),n=jindo.$Element(e),i=this.getLayer(),o=n.offset(),s=e.offsetWidth,h=e.offsetHeight,a=i.offsetWidth,r=i.offsetHeight,l={nTop:o.top,nLeft:o.left};if(e==document.body&&(t=jindo.$Document().clientSize(),s=t.width,h=t.height),a+=parseInt(this._htWElement.element.css("marginLeft"),10)+parseInt(this._htWElement.element.css("marginRight"),10)||0,r+=parseInt(this._htWElement.element.css("marginTop"),10)+parseInt(this._htWElement.element.css("marginBottom"),10)||0,"all"===this._sPosition)o=this._fixedLayerSize(s,h);else{switch(o.nLeft=l.nLeft+parseInt((s-a)/2,10)+parseInt(this._htMargin.nLeft,10),this._sPosition){case"top":o.nTop=l.nTop+parseInt(this._htMargin.nTop,10);break;case"center":o.nTop=l.nTop+parseInt((h-r)/2,10)+parseInt(this._htMargin.nTop,10);break;case"bottom":o.nTop=l.nTop+parseInt(h-r,10)-parseInt(this._htMargin.nBottom,10)}this._bUseFixedProperty||(o=this._adjustScrollPosition(o))}return o},_adjustScrollPosition:function(t){var e=jindo.$Document().scrollPosition();return t.nTop+=e.top,t.nLeft+=e.left,t},setPosition:function(t,e){if(this.isActivating()&&(this._htMargin=e||this._htMargin,this._sPosition=t||this._sPosition,this._fireEvent("beforePosition"))){var n=this._htWElement.element.visible();n||this._htWElement.element.css({left:"-9999px"}).show(),this._htOldPosition=this._htPosition,this._htPosition=this._getPosition(),n||this._htWElement.element.hide(),n&&this._htOldPosition.nLeft===this._htPosition.nLeft&&this._htOldPosition.nTop===this._htPosition.nTop&&this._htOldPosition.nBottom===this._htPosition.nBottom||("undefined"==typeof this._htPosition.nTop?this._htWElement.element.$value().style.top=null:"undefined"==typeof this._htPosition.nBottom&&(this._htWElement.element.$value().style.bottom=null),this._htWElement.element.css({left:this._htPosition.nLeft+"px",top:this._htPosition.nTop+"px",bottom:this._htPosition.nBottom+"px"})),this._fireEvent("position")}},_attachEvent:function(){this._htEvent={},this._htEvent.actionEvent=jindo.$Fn(this._onEvent,this),this._htEvent.pageShow=jindo.$Fn(this._onPageShow,this).bind(),this._bUseFixedProperty?this._htEvent.actionEvent.attach(window,"resize"):this._htEvent.actionEvent.attach(window,"scroll").attach(window,"resize"),jindo.m.bindPageshow(this._htEvent.pageShow),this._hasOrientationChange&&(this._htEvent.rotate=jindo.$Fn(this._onOrientationChange,this).attach(window,"orientationchange"))},_detachEvent:function(){this._htEvent.actionEvent.detach(window,"scroll").detach(window,"resize"),jindo.m.unbindPageshow(this._htEvent.pageShow),this._hasOrientationChange&&this._htEvent.rotate.detach(window,"orientationchange"),this._htEvent=null},_onEvent:function(){jindo.m._isUseFixed()&&jindo.m.getDeviceInfo().android&&this._htWElement.element.css("left",this._htWElement.element.css("left")),this._htWElement.element.visible()&&this.setPosition()},_onOrientationChange:function(){if(this._htWElement.element.visible()){var t=this;window.innerWidth<this._htWElement.element.width()?(this._nPreWidth=this._htWElement.element.width(),this._htWElement.element.width(window.innerWidth)):-1!==this._nPreWidth&&this._htWElement.element.width(this._nPreWidth),this._htWElement.element.hide(),this.setPosition(),jindo.m.getDeviceInfo().android&&!jindo.m.getDeviceInfo().bChrome?this._htWElement.element.show():setTimeout(function(){t.setPosition(),t._htWElement.element.show()},10)}},_onPageShow:function(){this.isActivating()&&this.setPosition()},_fireEvent:function(t){return this.fireEvent(t,{elLayer:this.getLayer(),htMargin:this.getMargin(),htPosition:this.getCurrentPosition()})},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;delete this._htWElement,delete this._htMargin,delete this._sPosition,delete this._htPosition,delete this._htOldPosition,delete this._bUseFixedProperty}}).extend(jindo.m.UIComponent),jindo.m.ScrollEnd=jindo.$Class({$init:function(t){this._initVar(),this._setWrapperElement(t),this._attachEvent()},_initVar:function(){this._nType=this._getDetectType(),this._bIOS=jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad,2===this._nType&&(this._nScrollTimer=-1),this._isTouched=!1,this._isMoved=!1,this._nObserver=null,this._nScrollEndTimer=null,this._nPreLeft=null,this._nPreTop=null,this._bMoveIOS=0},_getDetectType:function(){var t=0;return jindo.m.getDeviceInfo().android?t=parseInt(jindo.m.getDeviceInfo().version,10)>=3?2:1:jindo.m.getDeviceInfo().win&&parseInt(jindo.m.getDeviceInfo().version,10)>=8&&(t=2),t},_setWrapperElement:function(){this._htElement={},this._htElement.body=document.body},_attachEvent:function(){this._htEvent={},this._htEvent.event_scroll={ref:jindo.$Fn(this._onScroll,this).attach(window,"scroll"),el:window},0==this._nType&&this._bIOS&&(this._htEvent.event_touchmove={ref:jindo.$Fn(this._onMoveForIOS,this).attach(this._htElement.body,"touchmove"),el:this._htElement.body}),1==this._nType&&(this._htEvent.event_touchstart={ref:jindo.$Fn(this._onStartForAndroid,this).attach(this._htElement.body,"touchstart"),el:this._htElement.body},this._htEvent.event_touchmove={ref:jindo.$Fn(this._onMoveForAndroid,this).attach(this._htElement.body,"touchmove"),el:this._htElement.body},this._htEvent.event_touchend={ref:jindo.$Fn(this._onEndForAndroid,this).attach(this._htElement.body,"touchend"),el:this._htElement.body})},_onMoveForIOS:function(){this._bMoveIOS=0},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(t.lastIndexOf("_")))}},_startObserver:function(){var t=this;this._stopObserver(),this._nObserver=setInterval(function(){t._observe()},100)},_observe:function(){this._isTouched||this._nPreTop!==window.pageYOffset||this._nPreLeft!==window.pageXOffset?(this._nPreTop=window.pageYOffset,this._nPreLeft=window.pageXOffset):(this._stopObserver(),this._fireEventScrollEnd())},_stopObserver:function(){clearInterval(this._nObserver),this._nObserver=null},_onScroll:function(){switch(this._nType){case 0:if(this._bIOS&&this._bMoveIOS>0)return!1;this._fireEventScrollEnd(),this._bMoveIOS++;break;case 1:this._startObserver();break;case 2:var t=this;clearTimeout(this._nScrollTimer),this._nScrollTimer=setTimeout(function(){t._fireEventScrollEnd()},350)}},_onStartForAndroid:function(){this._isTouched=!0,this._isMoved=!1,this._nPreTop=null,this._nPreLeft=null},_onMoveForAndroid:function(){this._isMoved=!0},_onEndForAndroid:function(){this._isTouched=!1,this._isMoved&&this._startObserver()},_fireEventScrollEnd:function(){this.fireEvent("scrollEnd",{nTop:window.pageYOffset,nLeft:window.pageXOffset})},_fireEventScrollEndForAndroid:function(){var t=this;clearTimeout(this._nScrollEndTimer),this._nScrollEndTimer=setTimeout(function(){t._fireEventScrollEnd()},500)},destroy:function(){this._detachEvent(),this._nType=-1,this._isTouched=null,this._isMoved=null,this._nObserver=null,this._nPreLeft=null,this._nPreTop=null}}).extend(jindo.m.Component),jindo.m.FloatingLayer=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,sPosition:"bottom",sDirection:"up",nSlideDuration:500,sSlideTimingFunction:"ease-in-out",nFadeInDuration:0,sFadeInTimingFunction:"ease-in-out",nFadeOutDuration:200,sFadeOutTimingFunction:"ease-in-out",bUseHideUI:!0,bUseFixed:!1,nTimeout:-1}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oFloatingEffect=null,this._oFadeinEffect=null,this._oLayerPosition=null,this._oScrollEnd=null,this._nTimeoutTimer=-1,this._isFixed=!1,this._isLayerOn=!1,this._isMoving=!1},_setWrapperElement:function(t){this._htWElement={},this._htWElement.element=jindo.$Element(t),this._htWElement.viewElement=jindo.$Element(this._createView())},_initComponent:function(){var t=this,e=this._htWElement.element.$value();this._oLayerPosition=new jindo.m.LayerPosition(this._htWElement.viewElement,{sPosition:this.option("sPosition"),bActivateOnload:!1,bUseFixed:this.option("bUseFixed"),bAutoReposition:!0}),this._oFloatingEffect=new jindo.m.LayerEffect(e),this.option("bUseHideUI")&&0!==this.option("nFadeInDuration")&&(this._oFadeinEffect=new jindo.m.LayerEffect(this._htWElement.viewElement.$value(),{nDuration:this.option("nFadeInDuration")}).attach("afterEffect",function(){t._startHideTimer()})),this._isFixed=this._oLayerPosition.isUseFixed(),this._oScrollEnd=new jindo.m.ScrollEnd},getLayer:function(){return this._htWElement.element.$value()},_createView:function(){var t=this._htWElement.element.visible(),e=jindo.$Element("<div class='_floatingLayer_view_divtag_' style='display:none;'>"),n="",i="";return t||this._htWElement.element.css({left:"-9999px"}).show(),n=-1!=this._htWElement.element.css("width").indexOf("%")?this._htWElement.element.css("width"):this._htWElement.element.width()+"px",i=-1!=this._htWElement.element.css("height").indexOf("%")?this._htWElement.element.css("height"):this._htWElement.element.height()+"px",e.css({width:n,height:i,zIndex:2050}),t||this._htWElement.element.hide(),e},resize:function(t,e){this._htWElement.viewElement.css({width:t+"px",height:e+"px"}),this._oLayerPosition.setPosition()},show:function(){this._fireEvent("beforeShow")&&(this._oLayerPosition.isActivating()||this._oLayerPosition.activate(),this._setFloatingEffect(!0),this._htWElement.element.show(),this._htWElement.viewElement.show(),this._oFloatingEffect.slide({sDirection:this.option("sDirection"),nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sSlideTimingFunction"),elBaseLayer:this._htWElement.viewElement.$value()}))},hide:function(){this._fireEvent("beforeHide")&&(this._stopHideTimer(),this._oLayerPosition.isActivating()&&this._oLayerPosition.deactivate(),this._detachFloatingEvent(),this._setFloatingEffect(!1),0!==this.option("nFadeOutDuration")?this._oFloatingEffect.fade({sDirection:"out",nDuration:this.option("nFadeOutDuration"),sTransitionTimingFunction:this.option("sFadeOutTimingFunction")}):(this._htWElement.viewElement.hide(),this._fireEvent("hide")))},_fireEvent:function(t){return this.fireEvent(t,{welLayer:this._htWElement.element})},_startHideTimer:function(){if(this.option("nTimeout")>-1){var t=this;this._stopHideTimer(),this._nTimeoutTimer=setTimeout(function(){t.hide()},this.option("nTimeout"))}},_stopHideTimer:function(){clearTimeout(this._nTimeoutTimer),this._nTimeoutTimer=-1},_onTouchStart:function(t){this._initFloatingData(),this._isLayer(t.element)?(this._isLayerOn=!0,this._htWElement.viewElement.show()):(this._htWElement.viewElement.hide(),this._htWElement.viewElement.css("left",this._htWElement.viewElement.css("left")+"px"))},_onScrollEnd:function(){this.option("bUseHideUI")?this._isFixed?this._startHideTimer():this._runFadeIn():(this._oLayerPosition.setPosition(),this._startHideTimer())},_onTouchMove:function(){this._isMoving=!0},_onTouchEnd:function(){return this._isLayerOn?void this._oLayerPosition.setPosition():void(this._isMoving||this._runFadeIn())},_runFadeIn:function(){this._htWElement.viewElement.visible()||(this._isLayerOn?this._startHideTimer():this._fadeIn())},_fadeIn:function(){this._oLayerPosition.setPosition(),this._oFadeinEffect?(this._oFadeinEffect.clearEffect(!0),this._oFadeinEffect.fade({sDirection:"in",sTransitionTimingFunction:this.option("sFadeInTimingFunction")})):(this._htWElement.viewElement.show(),this._startHideTimer())},_isLayer:function(t){return t&&(this._htWElement.element.isEqual(t)||this._htWElement.viewElement.isEqual(t)||this._htWElement.viewElement.isParentOf(t))?!0:!1},_initFloatingData:function(){this._stopHideTimer(),this._oFloatingEffect&&0!==this.option("nFadeOutDuration")&&this._oFloatingEffect.clearEffect(!0),this._oFadeinEffect&&this._oFadeinEffect.clearEffect(!0),this._isMoving=!1,this._isLayerOn=!1},_onActivate:function(){this._initComponent()},_onDeactivate:function(){this._detachEvent(),this._oFadeinEffect&&(this._oFadeinEffect.detachAll("afterEffect"),this._oFadeinEffect.destroy()),this._oFloatingEffect.destroy(),this._oScrollEnd.destroy(),this._oLayerPosition.destroy(),this._htWElement.element.appendTo(document.body),this._htWElement.viewElement.leave()},_attachFloatingEvent:function(){if(this._htEvent={},this.option("bUseHideUI")&&!this._isFixed){var t=jindo.m._getTouchEventName();this._htEvent[t.start]={el:document.body,fn:jindo.$Fn(this._onTouchStart,this).bind()},this._htEvent[t.move]={el:document.body,fn:jindo.$Fn(this._onTouchMove,this).bind()},this._htEvent[t.end]={el:document.body,fn:jindo.$Fn(this._onTouchEnd,this).bind()},t.cancel&&(this._htEvent[t.cancel]={el:document.body,fn:jindo.$Fn(this._onTouchEnd,this).bind()});for(var e in this._htEvent)this._htEvent[e].fn&&(this._htEvent[e].ref=jindo.m._attachFakeJindo(this._htEvent[e].el,this._htEvent[e].fn,e))}this._oScrollEnd.attach("scrollEnd",jindo.$Fn(this._onScrollEnd,this).bind())},_detachEvent:function(){this._detachFloatingEvent()},_setFloatingEffect:function(t){var e=this;this._oFloatingEffect.detachAll("afterEffect"),this._oFloatingEffect.clearEffect(!0),this._oFadeinEffect&&this._oFadeinEffect.clearEffect(!0),t?this._oFloatingEffect.attach("afterEffect",function(){e._attachFloatingEvent(),e._startHideTimer(),e._fireEvent("show")}):0!==this.option("nFadeOutDuration")&&this._oFloatingEffect.attach("afterEffect",function(){e._htWElement.viewElement.hide(),e._fireEvent("hide")})},_detachFloatingEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref&&e.ref.detach(e.el,t)}this._oScrollEnd.detachAll("scrollEnd"),this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;delete this._htWElement,this._initFloatingData()}}).extend(jindo.m.UIComponent);